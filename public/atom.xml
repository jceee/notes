<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>This way up</title>
  <subtitle>I am not perfect but I keep trying</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.jcsama.com/"/>
  <updated>2019-04-23T14:34:16.511Z</updated>
  <id>http://www.jcsama.com/</id>
  
  <author>
    <name>jceee</name>
    <email>jceee@foxmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>golang/golang-defer</title>
    <link href="http://www.jcsama.com/2019/04/23/golang/golang-golang-defer/"/>
    <id>http://www.jcsama.com/2019/04/23/golang/golang-golang-defer/</id>
    <published>2019-04-23T14:33:16.000Z</published>
    <updated>2019-04-23T14:34:16.511Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight actionscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; defer&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight actionscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;ke
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>GO语言IDE篇--Vscode (Mac)</title>
    <link href="http://www.jcsama.com/2018/11/20/go-ide-vscode/"/>
    <id>http://www.jcsama.com/2018/11/20/go-ide-vscode/</id>
    <published>2018-11-20T15:26:46.000Z</published>
    <updated>2018-11-20T16:39:04.318Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;工欲善其事，必先利其器&lt;br&gt;—-《论语·卫灵公》&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u524D_u8A00&quot;&gt;&lt;a href=&quot;#u524D_u8A00&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;当我们开始学习一个编程语言时，第一步就是选择一款编码工具，我们使用工具的主要目的是提高我们的效率： &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;语法高亮(基本都有)&lt;/li&gt;
&lt;li&gt;支持DEBUG&lt;/li&gt;
&lt;li&gt;插件丰富&lt;/li&gt;
&lt;li&gt;集成终端&lt;/li&gt;
&lt;li&gt;颜值（这个也很重要啊喂！）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对比多款式工具后，jetbrains系列收费，LiteIDE略丑，Vim学习曲线高…最后我选择了满足了我的所有要求的Vscode，下面开始撸之～&lt;/p&gt;
&lt;h2 id=&quot;u5B89_u88C5GO_u73AF_u5883&quot;&gt;&lt;a href=&quot;#u5B89_u88C5GO_u73AF_u5883&quot; class=&quot;headerlink&quot; title=&quot;安装GO环境&quot;&gt;&lt;/a&gt;安装GO环境&lt;/h2&gt;&lt;p&gt;这里假设我们已经安装完基础环境并配置好了环境变量，略过…&lt;/p&gt;
&lt;h2 id=&quot;u5B89_u88C5vscode&quot;&gt;&lt;a href=&quot;#u5B89_u88C5vscode&quot; class=&quot;headerlink&quot; title=&quot;安装vscode&quot;&gt;&lt;/a&gt;安装vscode&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://code.visualstudio.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;vscode官网&lt;/a&gt;下之&lt;/p&gt;
&lt;h2 id=&quot;u5B89_u88C5go_u63D2_u4EF6&quot;&gt;&lt;a href=&quot;#u5B89_u88C5go_u63D2_u4EF6&quot; class=&quot;headerlink&quot; title=&quot;安装go插件&quot;&gt;&lt;/a&gt;安装go插件&lt;/h2&gt;&lt;h3 id=&quot;u57FA_u7840_u63D2_u4EF6&quot;&gt;&lt;a href=&quot;#u57FA_u7840_u63D2_u4EF6&quot; class=&quot;headerlink&quot; title=&quot;基础插件&quot;&gt;&lt;/a&gt;基础插件&lt;/h3&gt;&lt;p&gt;打开vscode，打开插件搜索，输入go，安装之:&lt;br&gt;&lt;img src=&quot;/images/go-vscode/go-extend.png&quot; alt=&quot;插件安装&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;u5B89_u88C5_u4F9D_u8D56_u5305_u652F_u6301&quot;&gt;&lt;a href=&quot;#u5B89_u88C5_u4F9D_u8D56_u5305_u652F_u6301&quot; class=&quot;headerlink&quot; title=&quot;安装依赖包支持&quot;&gt;&lt;/a&gt;安装依赖包支持&lt;/h3&gt;&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;mkdir&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;p&lt;/span&gt; $GOPAH/src/golang.org/&lt;span class=&quot;keyword&quot;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; $GOPAH/src/golang.org/&lt;span class=&quot;keyword&quot;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git clone http&lt;span class=&quot;variable&quot;&gt;s:&lt;/span&gt;//github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/golang/tools.git tools&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;get&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;u&lt;/span&gt;  github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/ramya-rao-&lt;span class=&quot;keyword&quot;&gt;a&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt;-outline&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;get&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;u&lt;/span&gt;  github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/acroca/&lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt;-symbols&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; install golang.org/&lt;span class=&quot;keyword&quot;&gt;x&lt;/span&gt;/tools/cmd/guru&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; install golang.org/&lt;span class=&quot;keyword&quot;&gt;x&lt;/span&gt;/tools/cmd/gorename&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;get&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;u&lt;/span&gt; github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/rogpeppe/godef&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;get&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;u&lt;/span&gt; github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/sqs/goreturns&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;get&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;u&lt;/span&gt; github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/ramya-rao-&lt;span class=&quot;keyword&quot;&gt;a&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt;-outline&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;get&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;u&lt;/span&gt; github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/josharian/impl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;get&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;u&lt;/span&gt; golang.org/&lt;span class=&quot;keyword&quot;&gt;x&lt;/span&gt;/lint/golint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;get&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;u&lt;/span&gt; github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/cweill/gotests/gotests&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u5B89_u88C5dlv&quot;&gt;&lt;a href=&quot;#u5B89_u88C5dlv&quot; class=&quot;headerlink&quot; title=&quot;安装dlv&quot;&gt;&lt;/a&gt;安装dlv&lt;/h3&gt;&lt;p&gt;go的debug依赖于dlv&lt;/p&gt;
&lt;p&gt;安装dlv有2种途径:&lt;/p&gt;
&lt;h4 id=&quot;brew_u5B89_u88C5dlv&quot;&gt;&lt;a href=&quot;#brew_u5B89_u88C5dlv&quot; class=&quot;headerlink&quot; title=&quot;brew安装dlv&quot;&gt;&lt;/a&gt;brew安装dlv&lt;/h4&gt;&lt;p&gt;这个帮你解决了证书等问题&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ brew &lt;span class=&quot;operator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;go&lt;/span&gt;-delve/delve/delve&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;go_get_u5B89_u88C5dlv&quot;&gt;&lt;a href=&quot;#go_get_u5B89_u88C5dlv&quot; class=&quot;headerlink&quot; title=&quot;go get安装dlv&quot;&gt;&lt;/a&gt;go get安装dlv&lt;/h4&gt;&lt;p&gt;安装dlv&lt;/p&gt;
&lt;figure class=&quot;highlight xquery&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ go get github.com/derekparker/delve/cmd/dlv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 查看是否安装成功&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;variable&quot;&gt;$GOPATH&lt;/span&gt;/bin/dlv version&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;把dlv从&lt;code&gt;GOPATH&lt;/code&gt;移动到&lt;code&gt;GOROOT&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight xquery&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo mv &lt;span class=&quot;variable&quot;&gt;$GOPATH&lt;/span&gt;/bin/dlv &lt;span class=&quot;variable&quot;&gt;$GOROOT&lt;/span&gt;/bin/dlv&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;创建系统证书&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; 打开&lt;span class=&quot;string&quot;&gt;&quot;钥匙串访问&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; 打开菜单 钥匙串访问/证书助理/创建证书...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; 名称: dlv-cert 身份类型: 自签名证书 证书类型: 代码签名 并 选择&lt;span class=&quot;string&quot;&gt;&quot;让我覆盖这些默认值&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; 单击&lt;span class=&quot;string&quot;&gt;&quot;继续&quot;&lt;/span&gt;, 有效期(天数): &lt;span class=&quot;number&quot;&gt;365&lt;/span&gt; 这里你可以自己修改, 我改为&lt;span class=&quot;number&quot;&gt;3650&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; 一路继续下去, 直到看到&lt;span class=&quot;string&quot;&gt;&quot;指定用于该证书的位置&quot;&lt;/span&gt; 钥匙串 选择 &lt;span class=&quot;string&quot;&gt;&quot;系统&quot;&lt;/span&gt; 并单击&lt;span class=&quot;string&quot;&gt;&quot;创建&quot;&lt;/span&gt;按钮&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt; 重启系统之后, 再打开&lt;span class=&quot;string&quot;&gt;&quot;钥匙串访问&quot;&lt;/span&gt;, 选择&lt;span class=&quot;string&quot;&gt;&quot;系统&quot;&lt;/span&gt;, 就会看到创建好的&lt;span class=&quot;string&quot;&gt;&quot;dlv-cert&quot;&lt;/span&gt;证书.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt; 右键&lt;span class=&quot;string&quot;&gt;&quot;dlv-cert&quot;&lt;/span&gt;证书, 选择&lt;span class=&quot;string&quot;&gt;&quot;显示简介&quot;&lt;/span&gt;-&amp;gt;&lt;span class=&quot;string&quot;&gt;&quot;信任&quot;&lt;/span&gt;-&amp;gt;&lt;span class=&quot;string&quot;&gt;&quot;代码签名&quot;&lt;/span&gt; 修改为: 始终信任&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;分配证书&lt;/p&gt;
&lt;figure class=&quot;highlight xquery&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo codesign -s &lt;span class=&quot;string&quot;&gt;&quot;dlv-cert&quot;&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$GOROOT&lt;/span&gt;/bin/dlv&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果调试时遇到下面问题：&lt;/p&gt;
&lt;figure class=&quot;highlight vhdl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;could &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; launch &lt;span class=&quot;keyword&quot;&gt;process&lt;/span&gt;: debugserver &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; lldb-server &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; found: install XCode&lt;span class=&quot;attribute&quot;&gt;&#39;s&lt;/span&gt; command line tools &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; lldb-server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以安装一下xcode-select:&lt;/p&gt;
&lt;figure class=&quot;highlight lua&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;xcode-&lt;span class=&quot;built_in&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;--install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u5F00_u59CB_u8C03_u8BD5&quot;&gt;&lt;a href=&quot;#u5F00_u59CB_u8C03_u8BD5&quot; class=&quot;headerlink&quot; title=&quot;开始调试&quot;&gt;&lt;/a&gt;开始调试&lt;/h2&gt;&lt;p&gt;创建个必写的hello world文件：&lt;/p&gt;
&lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;fmt&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; h &lt;span class=&quot;typename&quot;&gt;string&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;こんにちは&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; w &lt;span class=&quot;typename&quot;&gt;string&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;世界&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	fmt.Println(h, w)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后开始debug&lt;br&gt;&lt;img src=&quot;/images/go-vscode/start-debug.png&quot; alt=&quot;开始debug&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果是第一次调试，会让你编辑launch.json文件&lt;/p&gt;
&lt;p&gt;我们加一个配置：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;helloword&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;&lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;go&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;&lt;span class=&quot;attribute&quot;&gt;request&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;launch&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;&lt;span class=&quot;attribute&quot;&gt;mode&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;debug&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;&lt;span class=&quot;attribute&quot;&gt;env&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&amp;#123;&amp;#125;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;&lt;span class=&quot;attribute&quot;&gt;program&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;workspaceRoot&amp;#125;/hello/helloworld.go&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;program是调试文件的地址，${workspaceRoot}是项目的根目录，根据实际情况改&lt;/p&gt;
&lt;p&gt;保存，再跑一下debug：&lt;br&gt;&lt;img src=&quot;/images/go-vscode/debug.png&quot; alt=&quot;开始debug&quot;&gt;&lt;/p&gt;
&lt;p&gt;这样就完成了～&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;工欲善其事，必先利其器&lt;br&gt;—-《论语·卫灵公》&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u524D_u8A00&quot;&gt;&lt;a href=&quot;#u524D_u8A00&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言
    
    </summary>
    
    
      <category term="go" scheme="http://www.jcsama.com/tags/go/"/>
    
      <category term="ide" scheme="http://www.jcsama.com/tags/ide/"/>
    
  </entry>
  
  <entry>
    <title>java学习笔记[bean注解]</title>
    <link href="http://www.jcsama.com/2018/03/30/java-bean/"/>
    <id>http://www.jcsama.com/2018/03/30/java-bean/</id>
    <published>2018-03-30T14:22:53.000Z</published>
    <updated>2019-04-03T15:54:50.227Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;java的注解可以实现很多功能，如类的声明，属性声明，注入声明，配置…等等，这里对其作用做了笔记&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;Bean_u7684_u58F0_u660E&quot;&gt;&lt;a href=&quot;#Bean_u7684_u58F0_u660E&quot; class=&quot;headerlink&quot; title=&quot;Bean的声明&quot;&gt;&lt;/a&gt;Bean的声明&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;@Component 通用，无明确角色&lt;/li&gt;
&lt;li&gt;@Repository. 数据访问层（Dao）层注解&lt;/li&gt;
&lt;li&gt;@Controller  Controller层&lt;/li&gt;
&lt;li&gt;@Service  业务逻辑Service层&lt;/li&gt;
&lt;li&gt;@Configuration 配置文件&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;Scope&quot;&gt;&lt;a href=&quot;#Scope&quot; class=&quot;headerlink&quot; title=&quot;Scope&quot;&gt;&lt;/a&gt;Scope&lt;/h1&gt;&lt;h2 id=&quot;u4F5C_u7528_u57DF_u7C7B_u578B&quot;&gt;&lt;a href=&quot;#u4F5C_u7528_u57DF_u7C7B_u578B&quot; class=&quot;headerlink&quot; title=&quot;作用域类型&quot;&gt;&lt;/a&gt;作用域类型&lt;/h2&gt;&lt;p&gt;@Scope(“single”)    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;single          每个IOC容器对一个bean定义创建唯一实例 &lt;/li&gt;
&lt;li&gt;prototype    对一个bean定义，每次请求容器都会创建新的实例 &lt;/li&gt;
&lt;li&gt;session         对一个bean定义，一次web会话创建一个实例 &lt;/li&gt;
&lt;li&gt;request            对一个bean定义，一次web请求会创建一个实例 &lt;/li&gt;
&lt;li&gt;global session    对一个bean定义，一次porlet会话创建一个实例 &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;u4EE3_u7406&quot;&gt;&lt;a href=&quot;#u4EE3_u7406&quot; class=&quot;headerlink&quot; title=&quot;代理&quot;&gt;&lt;/a&gt;代理&lt;/h2&gt;&lt;p&gt;scoped-proxy的意义在关联bean之间的依赖&lt;br&gt;proxy，它代理的工作就是——暴露这个bean时令其符合其作用域的特性。&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;Scope&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(proxyMode = ScopedProxyMode.TARGET_CLASS)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;能够在HTTP request或者Session（甚至自定义）作用域中定义bean固然很好，但是Spring IoC容器除了管理对象（bean）的实例化，同时还负责协作者（或者叫依赖）的实例化。&lt;br&gt;如果你打算将一个Http request范围的bean注入到另一个bean中，那么需要注入一个AOP代理来替代被注入的作用域bean。&lt;br&gt;也就是说，你需要注入一个代理对象，该对象具有与被代理对象一样的公共接口，而容器则可以足够智能的从相关作用域中（比如一个HTTP request）获取到真实的目标对象，并把方法调用委派给实际的对象。&lt;/p&gt;
&lt;p&gt;proxyMode：代理方式&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;取值说明：  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ScopedProxyMode&lt;span class=&quot;class&quot;&gt;.DEFAULT&lt;/span&gt;:           默认  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ScopedProxyMode&lt;span class=&quot;class&quot;&gt;.NO&lt;/span&gt;:                不使用代理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ScopedProxyMode&lt;span class=&quot;class&quot;&gt;.INTERFACES&lt;/span&gt;:        接口    ---jdk动态代理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ScopedProxyMode&lt;span class=&quot;class&quot;&gt;.TARGET_CLASS&lt;/span&gt;:      类      ---cglib&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;Configuration&quot;&gt;&lt;a href=&quot;#Configuration&quot; class=&quot;headerlink&quot; title=&quot;Configuration&quot;&gt;&lt;/a&gt;Configuration&lt;/h1&gt;&lt;p&gt;@Bean&lt;br&gt;配置Bean&lt;/p&gt;
&lt;h1 id=&quot;Bean_u7684_u6CE8_u5165&quot;&gt;&lt;a href=&quot;#Bean_u7684_u6CE8_u5165&quot; class=&quot;headerlink&quot; title=&quot;Bean的注入&quot;&gt;&lt;/a&gt;Bean的注入&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;@Autowired          Spring 提供的注解 .    (required=false)非必要注入，找不到不会报错&lt;/li&gt;
&lt;li&gt;@Resource           JSR-250提供的注解.    &lt;/li&gt;
&lt;li&gt;@Inject                JSR-330提供的注解&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;u533A_u522B&quot;&gt;&lt;a href=&quot;#u533A_u522B&quot; class=&quot;headerlink&quot; title=&quot;区别&quot;&gt;&lt;/a&gt;区别&lt;/h2&gt;&lt;p&gt;‘@Autowired’和‘@Inject’这两个注解行为完全相同，都是通过AutowiredAnnotation的BeanPostProcessor来实现依赖注入。也就是说，在注入Spring bean的时候‘Autowired’和‘@Inject’可以互换。&lt;/p&gt;
&lt;p&gt;而‘@Resource’使用CommonAnnotationBeanPostProcessor来实现注入。虽然它使用的注入处理类不一样，但是其实所有这三个注解行为几乎一样。&lt;/p&gt;
&lt;p&gt;下面是它们执行逻辑顺序的总结：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;@Autowired和@Inject&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;按照类型匹配&lt;br&gt;使用限定符进行类型限定&lt;br&gt;按照名称匹配&lt;/p&gt;
&lt;p&gt;&lt;code&gt;@Resource&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;按照名称匹配&lt;br&gt;按照类型匹配&lt;br&gt;使用限定符进行类型限定（但如果名称匹配成功的话这条会被忽略）&lt;/p&gt;
&lt;p&gt;Ps: 使用@Inject需要Jsr-303的支持，添加依赖&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;javax.inject&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;javax.inject&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;List_2CMap_u7684_u6CE8_u5165&quot;&gt;&lt;a href=&quot;#List_2CMap_u7684_u6CE8_u5165&quot; class=&quot;headerlink&quot; title=&quot;List,Map的注入&quot;&gt;&lt;/a&gt;List,Map的注入&lt;/h1&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Example&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Autowired&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;List&lt;/span&gt;&amp;lt;Bean&amp;gt; &lt;span class=&quot;keyword&quot;&gt;list&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Qualifier&quot;&gt;&lt;a href=&quot;#Qualifier&quot; class=&quot;headerlink&quot; title=&quot;Qualifier&quot;&gt;&lt;/a&gt;Qualifier&lt;/h2&gt;&lt;p&gt;限定符&lt;/p&gt;
&lt;h1 id=&quot;Required&quot;&gt;&lt;a href=&quot;#Required&quot; class=&quot;headerlink&quot; title=&quot;Required&quot;&gt;&lt;/a&gt;Required&lt;/h1&gt;&lt;p&gt;@Required注解适用于bean属性的setter方法并且它指示，受影响的bean属性必须在配置时被填充在XML配置文件中，否则容器将抛出BeanInitializationException例外。&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Demo&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;annotation&quot;&gt;@Required&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.name = name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Class Demo2 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;annotation&quot;&gt;@Autowired&lt;/span&gt;(value=&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Demo demo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;Meta-annotations_u5143_u6CE8_u89E3&quot;&gt;&lt;a href=&quot;#Meta-annotations_u5143_u6CE8_u89E3&quot; class=&quot;headerlink&quot; title=&quot;Meta-annotations元注解&quot;&gt;&lt;/a&gt;Meta-annotations元注解&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;@Retention：&lt;/p&gt;
&lt;p&gt;可以设置三种值RetentionPolicy.CLASS、RentionPolicy.RUNTIME、RentionPolicy.SOURCE，表明描述注解的生命周期，即注解的生效范围，分别是：&lt;br&gt; 1.SOURCE：在源文件中生效，仅存在java文件中，class文件将会去除注解。&lt;/p&gt;
&lt;p&gt; 2.CLASS：在class文件中生效，仅保留在class文件中，运行时无法获取注解。&lt;/p&gt;
&lt;p&gt; 3.RUNTIME:在运行时生效，保留在class文件中且运行时可通过反射机制获取。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;@Target：&lt;/p&gt;
&lt;p&gt;表示该新定义Annotation的作用目标，具体可参考API文档。&lt;br&gt;  1.CONSTRUCTOR:用于描述构造器&lt;/p&gt;
&lt;p&gt;  2.FIELD:用于描述域（成员变量）&lt;/p&gt;
&lt;p&gt;  3.LOCAL_VARIABLE:用于描述局部变量&lt;/p&gt;
&lt;p&gt;  4.METHOD:用于描述方法&lt;/p&gt;
&lt;p&gt;  5.PACKAGE:用于描述包&lt;/p&gt;
&lt;p&gt;  6.PARAMETER:用于描述参数&lt;/p&gt;
&lt;p&gt;  7.TYPE:用于描述类、接口(包括注解类型) 或enum声明&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;@Documented&lt;/p&gt;
&lt;p&gt;表示该新定义Annotation是否保留在Java Docs中。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;@Inherited&lt;/p&gt;
&lt;p&gt;表示使用该新定义Annotation可以继承。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;java的注解可以实现很多功能，如类的声明，属性声明，注入声明，配置…等等，这里对其作用做了笔记&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;Bean_u7684_u58F0_u660E&quot;&gt;&lt;a href=&quot;#Bean_u7684_u58F
    
    </summary>
    
      <category term="java" scheme="http://www.jcsama.com/categories/java/"/>
    
    
      <category term="java" scheme="http://www.jcsama.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>php-config</title>
    <link href="http://www.jcsama.com/2016/10/14/php-config/"/>
    <id>http://www.jcsama.com/2016/10/14/php-config/</id>
    <published>2016-10-14T09:39:00.000Z</published>
    <updated>2016-10-14T09:46:57.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;php配置&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;PHP_config&quot;&gt;&lt;a href=&quot;#PHP_config&quot; class=&quot;headerlink&quot; title=&quot;PHP config&quot;&gt;&lt;/a&gt;PHP config&lt;/h1&gt;&lt;h2 id=&quot;u9690_u85CFphp_u7248_u672C_u53F7&quot;&gt;&lt;a href=&quot;#u9690_u85CFphp_u7248_u672C_u53F7&quot; class=&quot;headerlink&quot; title=&quot;隐藏php版本号&quot;&gt;&lt;/a&gt;隐藏php版本号&lt;/h2&gt;&lt;p&gt;通常没经验修改配置的php服务，在请求结束时返回的Response头中会带有php的版本信息，如：&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cache-&lt;span class=&quot;symbol&quot;&gt;control:&lt;/span&gt;no-cache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;constant&quot;&gt;Connection&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:keep-alive&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;constant&quot;&gt;Content&lt;/span&gt;-&lt;span class=&quot;constant&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:text/html&lt;/span&gt;; charset=&lt;span class=&quot;constant&quot;&gt;UTF&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;date:&lt;/span&gt;&lt;span class=&quot;constant&quot;&gt;Fri&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;constant&quot;&gt;Oct&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt; 09&lt;span class=&quot;symbol&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;constant&quot;&gt;GMT&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;constant&quot;&gt;Server&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:nginx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;constant&quot;&gt;Transfer&lt;/span&gt;-&lt;span class=&quot;constant&quot;&gt;Encoding&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:chunked&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;constant&quot;&gt;X&lt;/span&gt;-&lt;span class=&quot;constant&quot;&gt;Powered&lt;/span&gt;-&lt;span class=&quot;constant&quot;&gt;By&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:PHP/&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;5.6&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们想隐藏掉&lt;code&gt;X-Powered-By:PHP/5.6.16&lt;/code&gt;只需修改一个地方：php.ini中的&lt;code&gt;expose_php&lt;/code&gt;,把&lt;code&gt;On&lt;/code&gt;改为&lt;code&gt;Off&lt;/code&gt;即可&lt;/p&gt;
&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;setting&quot;&gt;expose_php = &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Off&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;效果如下&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;operator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;cache&lt;/span&gt;-control:&lt;span class=&quot;keyword&quot;&gt;no&lt;/span&gt;-&lt;span class=&quot;keyword&quot;&gt;cache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Connection&lt;/span&gt;:&lt;span class=&quot;keyword&quot;&gt;keep&lt;/span&gt;-alive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Content&lt;/span&gt;-&lt;span class=&quot;keyword&quot;&gt;Type&lt;/span&gt;:&lt;span class=&quot;built_in&quot;&gt;text&lt;/span&gt;/html;&lt;/span&gt; charset=UTF-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;date:Fri, 14 Oct 2016 09:46:31 GMT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Server:nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Transfer-Encoding:chunked&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;php配置&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;PHP_config&quot;&gt;&lt;a href=&quot;#PHP_config&quot; class=&quot;headerlink&quot; title=&quot;PHP config&quot;&gt;&lt;/a&gt;PHP config&lt;/h1&gt;&lt;
    
    </summary>
    
      <category term="php" scheme="http://www.jcsama.com/categories/php/"/>
    
    
      <category term="php" scheme="http://www.jcsama.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>linux-find</title>
    <link href="http://www.jcsama.com/2016/07/04/linux-find/"/>
    <id>http://www.jcsama.com/2016/07/04/linux-find/</id>
    <published>2016-07-04T07:02:12.000Z</published>
    <updated>2016-07-10T10:41:14.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;find是linux 命令，它将档案系统内符合 expression 的档案列出来。你可以指要档案的名称、类别、时间、大小、权限等不同资讯的组合，只有完全相符的才会被列出来。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u8BED_u6CD5&quot;&gt;&lt;a href=&quot;#u8BED_u6CD5&quot; class=&quot;headerlink&quot; title=&quot;语法&quot;&gt;&lt;/a&gt;语法&lt;/h2&gt;&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -option [ -&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt; ] [ -exec -ok command ] &amp;#123;&amp;#125; \;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下边列举常用的一些条件&lt;/p&gt;
&lt;h2 id=&quot;path&quot;&gt;&lt;a href=&quot;#path&quot; class=&quot;headerlink&quot; title=&quot;path&quot;&gt;&lt;/a&gt;path&lt;/h2&gt;&lt;p&gt;查找单个目录：&lt;/p&gt;
&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;find /tmp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;查找多个目录:&lt;/p&gt;
&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;regexp&quot;&gt;/tmp /&lt;/span&gt;opt &lt;span class=&quot;regexp&quot;&gt;/etc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;option&quot;&gt;&lt;a href=&quot;#option&quot; class=&quot;headerlink&quot; title=&quot;option&quot;&gt;&lt;/a&gt;option&lt;/h2&gt;&lt;h3 id=&quot;u6309_u6863_u6848_u540D&quot;&gt;&lt;a href=&quot;#u6309_u6863_u6848_u540D&quot; class=&quot;headerlink&quot; title=&quot;按档案名&quot;&gt;&lt;/a&gt;按档案名&lt;/h3&gt;&lt;p&gt;查找后缀为&lt;code&gt;.md&lt;/code&gt; 的档案&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -name &quot;*.&lt;span class=&quot;built_in&quot;&gt;md&lt;/span&gt;&quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;查找后缀为&lt;code&gt;.md&lt;/code&gt;的档案，并不区分大小写(可以是&lt;code&gt;.MD&lt;/code&gt;,&lt;code&gt;.Md&lt;/code&gt;,&lt;code&gt;.mD&lt;/code&gt;)&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -iname &quot;*.&lt;span class=&quot;built_in&quot;&gt;md&lt;/span&gt;&quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u6309_u6863_u6848_u7C7B_u578B&quot;&gt;&lt;a href=&quot;#u6309_u6863_u6848_u7C7B_u578B&quot; class=&quot;headerlink&quot; title=&quot;按档案类型&quot;&gt;&lt;/a&gt;按档案类型&lt;/h3&gt;&lt;p&gt;文件夹&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; d&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;符号连接&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; l&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;一般档案&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; f&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;字形装置&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; c&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;区块装置&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; b&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;具名贮列&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; p&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;socket&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; s&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u65F6_u95F4&quot;&gt;&lt;a href=&quot;#u65F6_u95F4&quot; class=&quot;headerlink&quot; title=&quot;时间&quot;&gt;&lt;/a&gt;时间&lt;/h3&gt;&lt;p&gt;类型&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a (access) 访问时间&lt;/li&gt;
&lt;li&gt;c (change) 状态改变时间(如修改,chmod,chown)&lt;/li&gt;
&lt;li&gt;m (modification) 修改时间&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;单位&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;min 以分钟为单位  &lt;/li&gt;
&lt;li&gt;time 以天为单位  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;量&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-n  在n单位时间内  &lt;/li&gt;
&lt;li&gt;+n  在n单位时间前  &lt;/li&gt;
&lt;li&gt;n   在n单位时间中  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在n分钟前被访问|修改|改变过的档案&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -amin +n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -mmin +n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -cmin +n&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在n分钟内被访问|修改|改变过的档案&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -amin -n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -mmin -n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -cmin -n&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在前n分钟被访问|修改|改变过的档案&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -amin n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -mmin n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -cmin n&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最近[n天内|n天前|前n天]被访问|修改|改变过的档案&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ find path -atime [-&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;|+&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;|&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ find path -mtime [-&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;|+&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;|&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ find path -ctime [-&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;|+&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;|&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;比file档案更晚被访问|修改|改变过的档案&lt;/p&gt;
&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;find&lt;/span&gt; path -anewer &lt;span class=&quot;keyword&quot;&gt;file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;find&lt;/span&gt; path -mnewer &lt;span class=&quot;keyword&quot;&gt;file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;find&lt;/span&gt; path -&lt;span class=&quot;keyword&quot;&gt;cnewer&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u8DEF_u5F84&quot;&gt;&lt;a href=&quot;#u8DEF_u5F84&quot; class=&quot;headerlink&quot; title=&quot;路径&quot;&gt;&lt;/a&gt;路径&lt;/h3&gt;&lt;p&gt;路径中含有path&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; &quot;*&lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt;*&quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;路径含有path并不区分大小写&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -ipath &quot;*&lt;span class=&quot;built_in&quot;&gt;PATH&lt;/span&gt;*&quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u5927_u5C0F&quot;&gt;&lt;a href=&quot;#u5927_u5C0F&quot; class=&quot;headerlink&quot; title=&quot;大小&quot;&gt;&lt;/a&gt;大小&lt;/h3&gt;&lt;p&gt;查找大于nk,小于nk的档案&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -size +nk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -size -nk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;空档案&lt;/p&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -empty&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u6743_u9650&quot;&gt;&lt;a href=&quot;#u6743_u9650&quot; class=&quot;headerlink&quot; title=&quot;权限&quot;&gt;&lt;/a&gt;权限&lt;/h3&gt;&lt;p&gt;mode的值 对应3种用户(所属用户，所属组，其他)的rwx权限 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-mode 3种用户的权限都跟mode值对上，则成功（如644对444|644）&lt;/li&gt;
&lt;li&gt;+mode 3种用户的权限只要有一个对上，则成功（如644能对622等）&lt;/li&gt;
&lt;li&gt;mode 3种用户的权限都要跟mode准确对上才成功（如222对222）&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -perm -&lt;span class=&quot;built_in&quot;&gt;mode&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -perm +&lt;span class=&quot;built_in&quot;&gt;mode&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;path&lt;/span&gt; -perm &lt;span class=&quot;built_in&quot;&gt;mode&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;exec&quot;&gt;&lt;a href=&quot;#exec&quot; class=&quot;headerlink&quot; title=&quot;exec&quot;&gt;&lt;/a&gt;exec&lt;/h2&gt;&lt;p&gt;需要对搜索结果执行shell命令则用&lt;code&gt;-exec&lt;/code&gt;,如&lt;/p&gt;
&lt;figure class=&quot;highlight elm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ find / -&lt;span class=&quot;typedef&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt; f -exec ls -lah &lt;span class=&quot;container&quot;&gt;&amp;#123;&amp;#125;&lt;/span&gt; \;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;example&quot;&gt;&lt;a href=&quot;#example&quot; class=&quot;headerlink&quot; title=&quot;example&quot;&gt;&lt;/a&gt;example&lt;/h2&gt;&lt;p&gt;把小于2k的文件搬到/tmp目录&lt;/p&gt;
&lt;figure class=&quot;highlight sqf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt; path -&lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt; -&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;k -&lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt; mv &amp;#123;&amp;#125; /tmp \;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;找出档案名含有’abc’ 的普通档案&lt;/p&gt;
&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;find&lt;/span&gt; path -name &lt;span class=&quot;string&quot;&gt;&#39;*abc*&#39;&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;f&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;find&lt;/span&gt; -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;f&lt;/span&gt; | &lt;span class=&quot;keyword&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;abc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;find是linux 命令，它将档案系统内符合 expression 的档案列出来。你可以指要档案的名称、类别、时间、大小、权限等不同资讯的组合，只有完全相符的才会被列出来。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u8BED_u6CD
    
    </summary>
    
      <category term="linux" scheme="http://www.jcsama.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.jcsama.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>linux-nohup</title>
    <link href="http://www.jcsama.com/2016/07/02/linux-nohup/"/>
    <id>http://www.jcsama.com/2016/07/02/linux-nohup/</id>
    <published>2016-07-02T09:33:25.000Z</published>
    <updated>2016-07-02T16:49:46.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;nohup(no hang up) 即不挂机，在关闭终端或退出账户时，仍不关闭进程&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u529F_u80FD&quot;&gt;&lt;a href=&quot;#u529F_u80FD&quot; class=&quot;headerlink&quot; title=&quot;功能&quot;&gt;&lt;/a&gt;功能&lt;/h2&gt;&lt;p&gt;nohup 命令运行由 Command参数和任何相关的 Arg参数指定的命令，忽略所有挂断（SIGHUP）信号。在注销后使用 nohup 命令运行后台中的程序。要运行后台中的 nohup 命令，添加 &amp;amp; （ 表示“and”的符号）到命令的尾部。&lt;br&gt;如果不将 nohup 命令的输出重定向，输出将附加到当前目录的 &lt;code&gt;nohup.out&lt;/code&gt; 文件中。如果当前目录的 nohup.out 文件不可写，输出重定向到 &lt;code&gt;$HOME/nohup.out&lt;/code&gt; 文件中。如果没有文件能创建或打开以用于追加，那么 Command 参数指定的命令不可调用。如果标准错误是一个终端，那么把指定的命令写给标准错误的所有输出作为标准输出重定向到相同的文件描述符。&lt;/p&gt;
&lt;h2 id=&quot;u8BED_u6CD5&quot;&gt;&lt;a href=&quot;#u8BED_u6CD5&quot; class=&quot;headerlink&quot; title=&quot;语法&quot;&gt;&lt;/a&gt;语法&lt;/h2&gt;&lt;figure class=&quot;highlight accesslog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ nohup Command &lt;span class=&quot;string&quot;&gt;[ Arg ... ]&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;[　&amp;amp; ]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;example:&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ nohup php test&lt;span class=&quot;class&quot;&gt;.php&lt;/span&gt; &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ nohup php test&lt;span class=&quot;class&quot;&gt;.php&lt;/span&gt; &amp;gt;~/outFile&lt;span class=&quot;class&quot;&gt;.out&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&amp;gt;&amp;amp;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;0 – stdin (standard input)&lt;/li&gt;
&lt;li&gt;1 – stdout (standard output)&lt;/li&gt;
&lt;li&gt;2 – stderr (standard error)  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2&amp;gt;&amp;amp;1是将标准错误（2）重定向到标准输出（&amp;amp;1），标准输出（&amp;amp;1）再被重定向输入到myout.file文件中。&lt;/p&gt;
&lt;h2 id=&quot;u67E5_u770B_u4EFB_u52A1_u5217_u8868&quot;&gt;&lt;a href=&quot;#u67E5_u770B_u4EFB_u52A1_u5217_u8868&quot; class=&quot;headerlink&quot; title=&quot;查看任务列表&quot;&gt;&lt;/a&gt;查看任务列表&lt;/h2&gt;&lt;p&gt;用&lt;code&gt;jobs&lt;/code&gt;可以看到正在运行的任务&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;	$ jobs                                                                                                                   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]  + running    nohup php test&lt;span class=&quot;class&quot;&gt;.php&lt;/span&gt; &amp;gt; ~/outFile&lt;span class=&quot;class&quot;&gt;.out&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&amp;gt;&amp;amp;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u5173_u95ED_u4EFB_u52A1&quot;&gt;&lt;a href=&quot;#u5173_u95ED_u4EFB_u52A1&quot; class=&quot;headerlink&quot; title=&quot;关闭任务&quot;&gt;&lt;/a&gt;关闭任务&lt;/h2&gt;&lt;p&gt;n为任务号&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;fg&lt;/span&gt; %n&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;nohup(no hang up) 即不挂机，在关闭终端或退出账户时，仍不关闭进程&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u529F_u80FD&quot;&gt;&lt;a href=&quot;#u529F_u80FD&quot; class=&quot;headerlink&quot; t
    
    </summary>
    
      <category term="linux" scheme="http://www.jcsama.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.jcsama.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu下配置lnmp</title>
    <link href="http://www.jcsama.com/2016/06/19/linux-lnmp/"/>
    <id>http://www.jcsama.com/2016/06/19/linux-lnmp/</id>
    <published>2016-06-19T14:10:25.000Z</published>
    <updated>2016-07-02T16:58:35.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;环境：Ubuntu Linux 14.04&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;u5B89_u88C5_u8F6F_u4EF6_u4ED3_u5E93_u7BA1_u7406_u5668&quot;&gt;&lt;a href=&quot;#u5B89_u88C5_u8F6F_u4EF6_u4ED3_u5E93_u7BA1_u7406_u5668&quot; class=&quot;headerlink&quot; title=&quot;安装软件仓库管理器&quot;&gt;&lt;/a&gt;安装软件仓库管理器&lt;/h1&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get &lt;span class=&quot;operator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;install&lt;/span&gt; python-software-properties;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;u5B89_u88C5PHP&quot;&gt;&lt;a href=&quot;#u5B89_u88C5PHP&quot; class=&quot;headerlink&quot; title=&quot;安装PHP&quot;&gt;&lt;/a&gt;安装PHP&lt;/h1&gt;&lt;h2 id=&quot;u5B89_u88C5php_u53CA_u6269_u5C55&quot;&gt;&lt;a href=&quot;#u5B89_u88C5php_u53CA_u6269_u5C55&quot; class=&quot;headerlink&quot; title=&quot;安装php及扩展&quot;&gt;&lt;/a&gt;安装php及扩展&lt;/h2&gt;&lt;figure class=&quot;highlight smali&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get install python-software-properties;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo&lt;span class=&quot;instruction&quot;&gt; add-apt-repository &lt;/span&gt;ppa:ondrej/ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-5.6;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get install ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-fpm ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-cli ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-curl ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-gd ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-json ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-mcrypt ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-mysqlnd ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-memcache ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-redis ph&lt;span class=&quot;variable&quot;&gt;p5&lt;/span&gt;-xdebug;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;查看版本信息&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;   $ php5-fpm -vPHP &lt;span class=&quot;number&quot;&gt;5.6&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.22&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;+donate.sury.org~trusty+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; (fpm-fcgi)Copyright (c) &lt;span class=&quot;number&quot;&gt;1997&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt; The PHP GroupZend Engine v2&lt;span class=&quot;number&quot;&gt;.6&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;, Copyright (c) &lt;span class=&quot;number&quot;&gt;1998&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt; Zend Technologies    with Zend OPcache v7&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.6&lt;/span&gt;-dev, Copyright (c) &lt;span class=&quot;number&quot;&gt;1999&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt;, by Zend Technologies    with Xdebug v2&lt;span class=&quot;number&quot;&gt;.3&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.3&lt;/span&gt;, Copyright (c) &lt;span class=&quot;number&quot;&gt;2002&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;2015&lt;/span&gt;, by Derick Rethans&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u5E38_u7528_u547D_u4EE4&quot;&gt;&lt;a href=&quot;#u5E38_u7528_u547D_u4EE4&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h2&gt;&lt;h3 id=&quot;u5173_u95ED_uFF0C_u5F00_u542F_uFF0C_u91CD_u542F&quot;&gt;&lt;a href=&quot;#u5173_u95ED_uFF0C_u5F00_u542F_uFF0C_u91CD_u542F&quot; class=&quot;headerlink&quot; title=&quot;关闭，开启，重启&quot;&gt;&lt;/a&gt;关闭，开启，重启&lt;/h3&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo service php5-fpm stop &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo service php5-fpm start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo service php5-fpm restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u5B89_u88C5composer&quot;&gt;&lt;a href=&quot;#u5B89_u88C5composer&quot; class=&quot;headerlink&quot; title=&quot;安装composer&quot;&gt;&lt;/a&gt;安装composer&lt;/h2&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo apt-get install curl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo curl -sS &lt;span class=&quot;symbol&quot;&gt;https:&lt;/span&gt;/&lt;span class=&quot;regexp&quot;&gt;/getcomposer.org/installer&lt;/span&gt; | php&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo mv composer.phar /usr/local/bin/composer&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;u5B89_u88C5Nginx&quot;&gt;&lt;a href=&quot;#u5B89_u88C5Nginx&quot; class=&quot;headerlink&quot; title=&quot;安装Nginx&quot;&gt;&lt;/a&gt;安装Nginx&lt;/h1&gt;&lt;h2 id=&quot;u5B89_u88C5Nginx-1&quot;&gt;&lt;a href=&quot;#u5B89_u88C5Nginx-1&quot; class=&quot;headerlink&quot; title=&quot;安装Nginx&quot;&gt;&lt;/a&gt;安装Nginx&lt;/h2&gt;&lt;figure class=&quot;highlight smali&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo&lt;span class=&quot;instruction&quot;&gt; add-apt-repository &lt;/span&gt;ppa:nginx/stable;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get update;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get install nginx;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;查看版本信息&lt;/p&gt;
&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo nginx -v&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u5E38_u7528_u547D_u4EE4-1&quot;&gt;&lt;a href=&quot;#u5E38_u7528_u547D_u4EE4-1&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h2&gt;&lt;p&gt;启动 ，关闭，重启，配置重载&lt;/p&gt;
&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo service nginx start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo service nginx stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo service nginx restart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo service nginx reload&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;u5B89_u88C5mysql&quot;&gt;&lt;a href=&quot;#u5B89_u88C5mysql&quot; class=&quot;headerlink&quot; title=&quot;安装mysql&quot;&gt;&lt;/a&gt;安装mysql&lt;/h1&gt;&lt;figure class=&quot;highlight smali&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo&lt;span class=&quot;instruction&quot;&gt; add-apt-repository &lt;/span&gt;-y ppa:ondrej/mysql-5.6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get -y install mysql-server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;登陆mysql创建账号&lt;/p&gt;
&lt;figure class=&quot;highlight oxygene&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mysql -u root &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt;&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; database wordpress;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt;grant all privileges &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; *.* &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; jceee identified &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;123456&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt;flush privileges;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt;&lt;span class=&quot;keyword&quot;&gt;exit&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;u4F7F_u7528wordpress_u6D4B_u8BD5_u73AF_u5883&quot;&gt;&lt;a href=&quot;#u4F7F_u7528wordpress_u6D4B_u8BD5_u73AF_u5883&quot; class=&quot;headerlink&quot; title=&quot;使用wordpress测试环境&quot;&gt;&lt;/a&gt;使用wordpress测试环境&lt;/h1&gt;&lt;h2 id=&quot;u5B89_u88C5git&quot;&gt;&lt;a href=&quot;#u5B89_u88C5git&quot; class=&quot;headerlink&quot; title=&quot;安装git&quot;&gt;&lt;/a&gt;安装git&lt;/h2&gt;&lt;figure class=&quot;highlight actionscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ apt-&lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt; install git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u521B_u5EFA_u9879_u76EE_u6587_u4EF6_u5939&quot;&gt;&lt;a href=&quot;#u521B_u5EFA_u9879_u76EE_u6587_u4EF6_u5939&quot; class=&quot;headerlink&quot; title=&quot;创建项目文件夹&quot;&gt;&lt;/a&gt;创建项目文件夹&lt;/h2&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo mkdir -&lt;span class=&quot;tag&quot;&gt;p&lt;/span&gt; /opt/htdocs/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u4E0B_u8F7Dwordpress&quot;&gt;&lt;a href=&quot;#u4E0B_u8F7Dwordpress&quot; class=&quot;headerlink&quot; title=&quot;下载wordpress&quot;&gt;&lt;/a&gt;下载wordpress&lt;/h2&gt;&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo git clone http&lt;span class=&quot;variable&quot;&gt;s:&lt;/span&gt;//github.&lt;span class=&quot;keyword&quot;&gt;com&lt;/span&gt;/WordPress/WordPress /&lt;span class=&quot;keyword&quot;&gt;opt&lt;/span&gt;/htdocs/wordpress&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo chown -R www-data /&lt;span class=&quot;keyword&quot;&gt;opt&lt;/span&gt;/htdocs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u589E_u52A0Nginx_u914D_u7F6E&quot;&gt;&lt;a href=&quot;#u589E_u52A0Nginx_u914D_u7F6E&quot; class=&quot;headerlink&quot; title=&quot;增加Nginx配置&quot;&gt;&lt;/a&gt;增加Nginx配置&lt;/h2&gt;&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo vi /etc/nginx/&lt;span class=&quot;keyword&quot;&gt;conf&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;d&lt;/span&gt;/wordpress.&lt;span class=&quot;keyword&quot;&gt;conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;写入以下内容，保存并重载Nginx配置&lt;/p&gt;
&lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;server&lt;/span&gt; &amp;#123;    &lt;span class=&quot;title&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;;    &lt;span class=&quot;title&quot;&gt;server_name&lt;/span&gt; www.wordpress.com;    &lt;span class=&quot;title&quot;&gt;root&lt;/span&gt; /opt/htdocs/wordpress;    &lt;span class=&quot;title&quot;&gt;index&lt;/span&gt; index.html index.php;    &lt;span class=&quot;title&quot;&gt;location&lt;/span&gt; / &amp;#123;        &lt;span class=&quot;title&quot;&gt;index&lt;/span&gt; index.html index.php;    &amp;#125;    &lt;span class=&quot;title&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;regexp&quot;&gt;~ \.php$&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;title&quot;&gt;include&lt;/span&gt; fastcgi.conf;                  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;title&quot;&gt;fastcgi_pass&lt;/span&gt; &lt;span class=&quot;url&quot;&gt;unix:/var/run/php5-fpm.sock&lt;/span&gt;;    &amp;#125;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果php-fpm是以TPC/IP    方式监听,如127.0.0.1:9000，则把上方&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fastcgi_pass &lt;span class=&quot;string&quot;&gt;unix:&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/var/&lt;/span&gt;run/php5-fpm.sock;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;改为&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fastcgi_pass &lt;span class=&quot;number&quot;&gt;127.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;9000&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u4FEE_u6539hosts&quot;&gt;&lt;a href=&quot;#u4FEE_u6539hosts&quot; class=&quot;headerlink&quot; title=&quot;修改hosts&quot;&gt;&lt;/a&gt;修改hosts&lt;/h2&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;sudo vi /etc/hosts&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;增加以下内容并保存退出&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;127&lt;span class=&quot;class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;class&quot;&gt;.1&lt;/span&gt; &lt;span class=&quot;tag&quot;&gt;www&lt;/span&gt;&lt;span class=&quot;class&quot;&gt;.wordpress&lt;/span&gt;&lt;span class=&quot;class&quot;&gt;.com&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u6D4B_u8BD5&quot;&gt;&lt;a href=&quot;#u6D4B_u8BD5&quot; class=&quot;headerlink&quot; title=&quot;测试&quot;&gt;&lt;/a&gt;测试&lt;/h2&gt;&lt;p&gt;在浏览器输入&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//www.wordpress.com&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;看访问结果&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;环境：Ubuntu Linux 14.04&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;u5B89_u88C5_u8F6F_u4EF6_u4ED3_u5E93_u7BA1_u7406_u5668&quot;&gt;&lt;a href=&quot;#u5B89_u88C5
    
    </summary>
    
      <category term="linux" scheme="http://www.jcsama.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.jcsama.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>mysql[ON DUPLICE KEY UPDATE]</title>
    <link href="http://www.jcsama.com/2016/06/10/mysql-on-duplice-key-update/"/>
    <id>http://www.jcsama.com/2016/06/10/mysql-on-duplice-key-update/</id>
    <published>2016-06-10T09:37:51.000Z</published>
    <updated>2016-06-11T08:11:30.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;ON_DUPLICE_KEY_UPDATE&quot;&gt;&lt;a href=&quot;#ON_DUPLICE_KEY_UPDATE&quot; class=&quot;headerlink&quot; title=&quot;ON DUPLICE KEY UPDATE&quot;&gt;&lt;/a&gt;ON DUPLICE KEY UPDATE&lt;/h2&gt;&lt;p&gt;[ON DUPLICE KEY UPDATE] 用于INSERT语句后面，作用是在执行INSERT时，若UNIQUE索引或者PRIMARY KEY出现重复时，则在出现重复值的行执行UPDATE，否则按正常INSERT语句执行.&lt;/p&gt;
&lt;h2 id=&quot;u6D4B_u8BD5_u8868&quot;&gt;&lt;a href=&quot;#u6D4B_u8BD5_u8868&quot; class=&quot;headerlink&quot; title=&quot;测试表&quot;&gt;&lt;/a&gt;测试表&lt;/h2&gt;&lt;p&gt;表结构：&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;operator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;`news`&lt;/span&gt; (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;`id`&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt; AUTO_INCREMENT,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;`title`&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;COLLATE&lt;/span&gt; utf8_unicode_ci &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;`body`&lt;/span&gt; longtext &lt;span class=&quot;keyword&quot;&gt;COLLATE&lt;/span&gt; utf8_unicode_ci,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PRIMARY &lt;span class=&quot;keyword&quot;&gt;KEY&lt;/span&gt; (&lt;span class=&quot;string&quot;&gt;`id`&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;) &lt;span class=&quot;keyword&quot;&gt;ENGINE&lt;/span&gt;=&lt;span class=&quot;keyword&quot;&gt;InnoDB&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;CHARSET&lt;/span&gt;=utf8 &lt;span class=&quot;keyword&quot;&gt;COLLATE&lt;/span&gt;=utf8_unicode_ci;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中&lt;code&gt;id&lt;/code&gt;为PRIMARY KEY&lt;br&gt;表数据：&lt;/p&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; SELECT * FROM news;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+--------+-------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| id | title  | body  |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+--------+-------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  1 | title1 | NULL  |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  2 | title2 | body2 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 12 | title1 | body3 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 13 | title1 | body4 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| 14 | NULL   | body5 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+--------+-------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u63D2_u5165_u4E00_u6761_u91CD_u590D_u6570_u636E&quot;&gt;&lt;a href=&quot;#u63D2_u5165_u4E00_u6761_u91CD_u590D_u6570_u636E&quot; class=&quot;headerlink&quot; title=&quot;插入一条重复数据&quot;&gt;&lt;/a&gt;插入一条重复数据&lt;/h2&gt;&lt;figure class=&quot;highlight autohotkey&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; INSERT INTO &lt;span class=&quot;escape&quot;&gt;`n&lt;/span&gt;ews&lt;span class=&quot;escape&quot;&gt;` &lt;/span&gt;(&lt;span class=&quot;escape&quot;&gt;`i&lt;/span&gt;d&lt;span class=&quot;escape&quot;&gt;`,&lt;/span&gt;&lt;span class=&quot;escape&quot;&gt;`t&lt;/span&gt;itle&lt;span class=&quot;escape&quot;&gt;`,&lt;/span&gt;&lt;span class=&quot;escape&quot;&gt;`b&lt;/span&gt;ody&lt;span class=&quot;escape&quot;&gt;`)&lt;/span&gt; VALUES (&#39;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&#39;,&#39;titleTest&#39;,&#39;bodyTest&#39;) ON DUPLICATE KEY UPDATE &lt;span class=&quot;escape&quot;&gt;`t&lt;/span&gt;itle&lt;span class=&quot;escape&quot;&gt;`=&lt;/span&gt; VALUES(&lt;span class=&quot;escape&quot;&gt;`t&lt;/span&gt;itle&lt;span class=&quot;escape&quot;&gt;`)&lt;/span&gt;,&lt;span class=&quot;escape&quot;&gt;`b&lt;/span&gt;ody&lt;span class=&quot;escape&quot;&gt;`=&lt;/span&gt;VALUES(&lt;span class=&quot;escape&quot;&gt;`b&lt;/span&gt;ody&lt;span class=&quot;escape&quot;&gt;`)&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Query OK, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; rows affected (&lt;span class=&quot;number&quot;&gt;0.00&lt;/span&gt; sec)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;show data:&lt;/p&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; SELECT * FROM news;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+-----------+----------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| id | title     | body     |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+-----------+----------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  1 | titleTest | bodyTest |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  2 | title2    | body2    |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 12 | title1    | body3    |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 13 | title1    | body4    |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| 14 | NULL      | body5    |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+-----------+----------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u63D2_u5165_u591A_u6761_u91CD_u590D_u6570_u636E&quot;&gt;&lt;a href=&quot;#u63D2_u5165_u591A_u6761_u91CD_u590D_u6570_u636E&quot; class=&quot;headerlink&quot; title=&quot;插入多条重复数据&quot;&gt;&lt;/a&gt;插入多条重复数据&lt;/h2&gt;&lt;figure class=&quot;highlight lasso&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; INSERT &lt;span class=&quot;keyword&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;`news`&lt;/span&gt; (&lt;span class=&quot;string&quot;&gt;`id`&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;`title`&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;`body`&lt;/span&gt;) VALUES (&lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;titleTest&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;bodyTest&#39;&lt;/span&gt;),(&lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;titleTest2&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;bodyTest2&#39;&lt;/span&gt;),(&lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;titleTest3&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;bodyTest3&#39;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;ON&lt;/span&gt; DUPLICATE KEY UPDATE &lt;span class=&quot;string&quot;&gt;`title`&lt;/span&gt;= VALUES(&lt;span class=&quot;string&quot;&gt;`title`&lt;/span&gt;),&lt;span class=&quot;string&quot;&gt;`body`&lt;/span&gt;=VALUES(&lt;span class=&quot;string&quot;&gt;`body`&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Query OK, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;rows&lt;/span&gt; affected (&lt;span class=&quot;number&quot;&gt;0.00&lt;/span&gt; sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Records&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;  Duplicates: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;  Warnings: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;show data:&lt;/p&gt;
&lt;figure class=&quot;highlight gherkin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; SELECT &lt;span class=&quot;keyword&quot;&gt;*&lt;/span&gt; FROM news;                                                                                                                                                           +----+------------+-----------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|&lt;span class=&quot;string&quot;&gt; id &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; title      &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; body      &lt;/span&gt;|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+------------+-----------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|&lt;span class=&quot;string&quot;&gt;  1 &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; titleTest  &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; bodyTest  &lt;/span&gt;|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|&lt;span class=&quot;string&quot;&gt;  2 &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; titleTest2 &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; bodyTest2 &lt;/span&gt;|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|&lt;span class=&quot;string&quot;&gt;  3 &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; titleTest3 &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; bodyTest3 &lt;/span&gt;|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|&lt;span class=&quot;string&quot;&gt; 12 &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; title1     &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; body3     &lt;/span&gt;|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|&lt;span class=&quot;string&quot;&gt; 13 &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; title1     &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; body4     &lt;/span&gt;|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|&lt;span class=&quot;string&quot;&gt; 14 &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; NULL       &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; body5     &lt;/span&gt;|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+------------+-----------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6 rows in set (0.00 sec)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;因为id3不存在，所以正常INSERT了1条数据，UPDATE了2条数据&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ON_DUPLICE_KEY_UPDATE&quot;&gt;&lt;a href=&quot;#ON_DUPLICE_KEY_UPDATE&quot; class=&quot;headerlink&quot; title=&quot;ON DUPLICE KEY UPDATE&quot;&gt;&lt;/a&gt;ON DUPLICE KEY UPDATE&lt;/
    
    </summary>
    
      <category term="mysql" scheme="http://www.jcsama.com/categories/mysql/"/>
    
    
      <category term="mysql" scheme="http://www.jcsama.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>mysql 字符串函数</title>
    <link href="http://www.jcsama.com/2016/05/22/mysql-strimg/"/>
    <id>http://www.jcsama.com/2016/05/22/mysql-strimg/</id>
    <published>2016-05-22T14:58:20.000Z</published>
    <updated>2016-05-22T16:00:18.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;test_table&quot;&gt;&lt;a href=&quot;#test_table&quot; class=&quot;headerlink&quot; title=&quot;test table&quot;&gt;&lt;/a&gt;test table&lt;/h1&gt;&lt;p&gt;使用一个测试表：&lt;/p&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; select * from news ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+--------+-------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| id | title  | body  |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+--------+-------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  1 | title1 | NULL  |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  2 | title2 | body2 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 12 | title1 | body3 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 13 | title1 | body4 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| 14 | NULL   | body5 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----+--------+-------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;concat&quot;&gt;&lt;a href=&quot;#concat&quot; class=&quot;headerlink&quot; title=&quot;concat&quot;&gt;&lt;/a&gt;concat&lt;/h1&gt;&lt;p&gt;使用方法：&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;CONCAT&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(str1,str2,...)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;返回连接参数产生的字符串，如果任何一个参数为null，则返回值为NULL.&lt;/p&gt;
&lt;p&gt;EXAMPLE:&lt;/p&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; select concat(id, &#39;-&#39;, title, &#39;-&#39;, body) from news ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| concat(id, &#39;-&#39;, title, &#39;-&#39;, body) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| NULL                              |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 2-title2-body2                    |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 12-title1-body3                   |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 13-title1-body4                   |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| NULL                              |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;concat_ws&quot;&gt;&lt;a href=&quot;#concat_ws&quot; class=&quot;headerlink&quot; title=&quot;concat_ws&quot;&gt;&lt;/a&gt;concat_ws&lt;/h1&gt;&lt;p&gt;使用方法：&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;CONCAT_WS&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(separator,str1,str2,...)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;concat_ws代表concat with separator通过分隔符separator将其他参数链接起来.当分隔符为NULL时，返回值为空；而当某个参数为空时，则跳过&lt;/p&gt;
&lt;p&gt;EXAMPLE:&lt;/p&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; select concat_ws(&#39;-&#39;, title, body) from news ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| concat_ws(&#39;-&#39;, title, body) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| title1                      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| title2-body2                |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| title1-body3                |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| title1-body4                |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| body5                       |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;group_concat&quot;&gt;&lt;a href=&quot;#group_concat&quot; class=&quot;headerlink&quot; title=&quot;group_concat&quot;&gt;&lt;/a&gt;group_concat&lt;/h1&gt;&lt;p&gt;使用方法&lt;/p&gt;
&lt;figure class=&quot;highlight oxygene&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GROUP_CONCAT([&lt;span class=&quot;keyword&quot;&gt;DISTINCT&lt;/span&gt;] Field [&lt;span class=&quot;keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;ASC&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;DESC&lt;/span&gt; SortField] [separator Separator])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;group_concat是把结果数据按字段Field连接起来，默认分隔符是&lt;code&gt;,&lt;/code&gt;,可选排重[DISTINCT],可选排序[ORDER BY ASC/DESC SortField]按SortField字段排序,可选分隔符[separtor Separator]按Separator分隔。&lt;/p&gt;
&lt;p&gt;EXAMPLE:&lt;/p&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; select group_concat(title) from news ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| group_concat(title)         |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| title1,title2,title1,title1 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; select group_concat(distinct title order by id desc separator &#39;;&#39;) from news ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-------------------------------------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| group_concat(distinct title order by id desc separator &#39;;&#39;) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-------------------------------------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| title2;title1                                               |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-------------------------------------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; select title,group_concat(distinct body order by id desc separator &#39;;&#39;) from news group by title;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+------------------------------------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| title  | group_concat(distinct body order by id desc separator &#39;;&#39;) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+------------------------------------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| NULL   | body5                                                      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| title1 | body4;body3                                                |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| title2 | body2                                                      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+------------------------------------------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;repeat&quot;&gt;&lt;a href=&quot;#repeat&quot; class=&quot;headerlink&quot; title=&quot;repeat&quot;&gt;&lt;/a&gt;repeat&lt;/h1&gt;&lt;p&gt;使用方法&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(str, repeatTime)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将str循环repeatTime次&lt;/p&gt;
&lt;p&gt;EXAMPLE&lt;/p&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; select repeat(&#39;test&#39;, 4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| repeat(&#39;test&#39;, 4) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| testtesttesttest  |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;mysql&amp;gt; select repeat(body, 4) from news;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| repeat(body, 4)      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| NULL                 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| body2body2body2body2 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| body3body3body3body3 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| body4body4body4body4 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;header&quot;&gt;| body5body5body5body5 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;test_table&quot;&gt;&lt;a href=&quot;#test_table&quot; class=&quot;headerlink&quot; title=&quot;test table&quot;&gt;&lt;/a&gt;test table&lt;/h1&gt;&lt;p&gt;使用一个测试表：&lt;/p&gt;
&lt;figure class=&quot;highlight 
    
    </summary>
    
      <category term="mysql" scheme="http://www.jcsama.com/categories/mysql/"/>
    
    
      <category term="mysql" scheme="http://www.jcsama.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>linux-curl</title>
    <link href="http://www.jcsama.com/2016/04/10/linux-curl/"/>
    <id>http://www.jcsama.com/2016/04/10/linux-curl/</id>
    <published>2016-04-10T14:26:50.000Z</published>
    <updated>2016-04-25T14:59:10.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;curl是利用URL语法在命令行方式下工作的开源文件传输工具。它被广泛应用在Unix、多种Linux发行版中，并且有DOS和Win32、Win64下的移植版本。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u83B7_u53D6url_u5185_u5BB9&quot;&gt;&lt;a href=&quot;#u83B7_u53D6url_u5185_u5BB9&quot; class=&quot;headerlink&quot; title=&quot;获取url内容&quot;&gt;&lt;/a&gt;获取url内容&lt;/h2&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;curl url&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u4FDD_u5B58_u5185_u5BB9&quot;&gt;&lt;a href=&quot;#u4FDD_u5B58_u5185_u5BB9&quot; class=&quot;headerlink&quot; title=&quot;保存内容&quot;&gt;&lt;/a&gt;保存内容&lt;/h2&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;curl -o filename url&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;curl url &lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt; &lt;/span&gt;filename&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u663E_u793A_u4E0B_u8F7D_u8FDB_u5EA6_u6761-_23&quot;&gt;&lt;a href=&quot;#u663E_u793A_u4E0B_u8F7D_u8FDB_u5EA6_u6761-_23&quot; class=&quot;headerlink&quot; title=&quot;显示下载进度条-#&quot;&gt;&lt;/a&gt;显示下载进度条&lt;code&gt;-#&lt;/code&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;curl -&lt;span class=&quot;comment&quot;&gt;# -o filename url&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u83B7_u53D6response_header&quot;&gt;&lt;a href=&quot;#u83B7_u53D6response_header&quot; class=&quot;headerlink&quot; title=&quot;获取response header&quot;&gt;&lt;/a&gt;获取response header&lt;/h2&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ curl -&lt;span class=&quot;tag&quot;&gt;i&lt;/span&gt; url&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;POST_u6570_u636E&quot;&gt;&lt;a href=&quot;#POST_u6570_u636E&quot; class=&quot;headerlink&quot; title=&quot;POST数据&quot;&gt;&lt;/a&gt;POST数据&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ curl &lt;span class=&quot;operator&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;key1=val1&amp;amp;key2=val2&quot;&lt;/span&gt; url&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;PUT_u6587_u4EF6&quot;&gt;&lt;a href=&quot;#PUT_u6587_u4EF6&quot; class=&quot;headerlink&quot; title=&quot;PUT文件&quot;&gt;&lt;/a&gt;PUT文件&lt;/h2&gt;&lt;figure class=&quot;highlight elixir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;curl -&lt;span class=&quot;constant&quot;&gt;F &lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;fileUpload=@/Users/jceee/Pictures/default_avatar.jpeg&quot;&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;symbol&quot;&gt;http:&lt;/span&gt;/&lt;span class=&quot;regexp&quot;&gt;/local.creed.com/curl&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;UserAgent&quot;&gt;&lt;a href=&quot;#UserAgent&quot; class=&quot;headerlink&quot; title=&quot;UserAgent&quot;&gt;&lt;/a&gt;UserAgent&lt;/h2&gt;&lt;figure class=&quot;highlight autohotkey&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ curl -&lt;span class=&quot;literal&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;USER AGENT&quot;&lt;/span&gt; URL&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;COOKIE&quot;&gt;&lt;a href=&quot;#COOKIE&quot; class=&quot;headerlink&quot; title=&quot;COOKIE&quot;&gt;&lt;/a&gt;COOKIE&lt;/h2&gt;&lt;p&gt;Cookie是服务器经常使用的一种记忆客户信息的方法。如果cookie被记录在了文件中，那么使用命令：&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ curl -&lt;span class=&quot;tag&quot;&gt;b&lt;/span&gt; stored_cookies_in_file \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http:&lt;span class=&quot;comment&quot;&gt;//local.creed.com&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以通过请求登陆接口保存cookie文件：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ curl -c stored_cookies_&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;_file \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;operator&quot;&gt;-d&lt;/span&gt;  &lt;span class=&quot;string&quot;&gt;&quot;user=username&amp;amp;password=password&quot;&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http://local.creed.com/login&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;REFERER&quot;&gt;&lt;a href=&quot;#REFERER&quot; class=&quot;headerlink&quot; title=&quot;REFERER&quot;&gt;&lt;/a&gt;REFERER&lt;/h2&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;curl -e &lt;span class=&quot;symbol&quot;&gt;http:&lt;/span&gt;/&lt;span class=&quot;regexp&quot;&gt;/www.baidu.com http:/&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/local.creed.com/curl&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u4EE3_u7406&quot;&gt;&lt;a href=&quot;#u4EE3_u7406&quot; class=&quot;headerlink&quot; title=&quot;代理&quot;&gt;&lt;/a&gt;代理&lt;/h2&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ curl -x &lt;span class=&quot;string&quot;&gt;ip:&lt;/span&gt;port &lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//local.creed.com/curl&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u4F2A_u9020Ip&quot;&gt;&lt;a href=&quot;#u4F2A_u9020Ip&quot; class=&quot;headerlink&quot; title=&quot;伪造Ip&quot;&gt;&lt;/a&gt;伪造Ip&lt;/h2&gt;&lt;p&gt;仅限于用X-FORWARDED-FOR获取IP的地址&lt;/p&gt;
&lt;figure class=&quot;highlight livescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ curl -H &lt;span class=&quot;string&quot;&gt;&quot;X-FORWARDED-FOR:202.103.229.11&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; -H &lt;span class=&quot;string&quot;&gt;&quot;CLIENT-IP:202.103.229.11&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;string&quot;&gt;&quot;http://local.creed.com/curl&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;curl是利用URL语法在命令行方式下工作的开源文件传输工具。它被广泛应用在Unix、多种Linux发行版中，并且有DOS和Win32、Win64下的移植版本。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u83B7_u53D6url_u5
    
    </summary>
    
      <category term="linux" scheme="http://www.jcsama.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.jcsama.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>订阅发布者模式</title>
    <link href="http://www.jcsama.com/2016/04/04/pattern-pub-sub/"/>
    <id>http://www.jcsama.com/2016/04/04/pattern-pub-sub/</id>
    <published>2016-04-04T09:21:45.000Z</published>
    <updated>2016-04-04T09:26:01.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;发布/ 订阅者模式（Publish/Subscribe）有两个参与者：发布者和订阅者。发布者创建某个信息，订阅者绑定这个信道，当发布者有消息发布至该信道时，订阅者就会接收到一个通知。最重要的一点是，发布者和订阅者是完全解耦的，彼此并不知晓对方的存在一种消息模式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;u8BA2_u9605_u53D1_u5E03_u8005&quot;&gt;&lt;a href=&quot;#u8BA2_u9605_u53D1_u5E03_u8005&quot; class=&quot;headerlink&quot; title=&quot;订阅发布者&quot;&gt;&lt;/a&gt;订阅发布者&lt;/h2&gt;&lt;p&gt;我们创建一个简单的订阅发布者，基本的4个方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;registerSubscriber 注册订阅者&lt;/li&gt;
&lt;li&gt;removeSubscriber   订阅的取消&lt;/li&gt;
&lt;li&gt;publish            消息推送&lt;/li&gt;
&lt;li&gt;sortList           消息推送排序&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight xquery&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class DispatcherPattern&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protected &lt;span class=&quot;variable&quot;&gt;$subList&lt;/span&gt; = array();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public function registerSubscriber(&lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$callback&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;subList[&lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;] = &lt;span class=&quot;variable&quot;&gt;$callback&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public function removeSubscriber(&lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (isset(&lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;subList[&lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;])) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            unset(&lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;subList[&lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public function publish(&lt;span class=&quot;variable&quot;&gt;$params&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (empty(&lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;subList) || !is_array(&lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;subList)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return &lt;span class=&quot;string&quot;&gt;&#39;null&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        foreach (&lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;subList as &lt;span class=&quot;variable&quot;&gt;$callback&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            call_user_func_array(&lt;span class=&quot;variable&quot;&gt;$callback&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$params&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public function sortList()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ksort(&lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;subList);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u8BA2_u9605_u4F53&quot;&gt;&lt;a href=&quot;#u8BA2_u9605_u4F53&quot; class=&quot;headerlink&quot; title=&quot;订阅体&quot;&gt;&lt;/a&gt;订阅体&lt;/h2&gt;&lt;p&gt;接着我们创建一个用户对象,用户对象有增加积分的功能&lt;/p&gt;
&lt;figure class=&quot;highlight xquery&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class User&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protected &lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public function __construct(&lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;name = &lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public function addScore(&lt;span class=&quot;variable&quot;&gt;$score&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        printf( &lt;span class=&quot;variable&quot;&gt;$this-&lt;/span&gt;&amp;gt;name . &lt;span class=&quot;string&quot;&gt;&#39; add Score :&#39;&lt;/span&gt; . &lt;span class=&quot;variable&quot;&gt;$score&lt;/span&gt; . &lt;span class=&quot;string&quot;&gt;&quot;\r\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u901A_u8FC7_u8BA2_u9605_u53D1_u5E03_u8005_u6A21_u5F0F_u4E3A_u7528_u6237_u589E_u52A0_u79EF_u5206&quot;&gt;&lt;a href=&quot;#u901A_u8FC7_u8BA2_u9605_u53D1_u5E03_u8005_u6A21_u5F0F_u4E3A_u7528_u6237_u589E_u52A0_u79EF_u5206&quot; class=&quot;headerlink&quot; title=&quot;通过订阅发布者模式为用户增加积分&quot;&gt;&lt;/a&gt;通过订阅发布者模式为用户增加积分&lt;/h2&gt;&lt;figure class=&quot;highlight xquery&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$score&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$dispatcher&lt;/span&gt; = new DispatcherPattern();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$dispatcher-&lt;/span&gt;&amp;gt;registerSubscriber(&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printf( &lt;span class=&quot;string&quot;&gt;&quot;this is first handle \r\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$dispatcher-&lt;/span&gt;&amp;gt;registerSubscriber(&lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(new User(&lt;span class=&quot;string&quot;&gt;&#39;user3&#39;&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&#39;addScore&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$dispatcher-&lt;/span&gt;&amp;gt;registerSubscriber(&lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(new User(&lt;span class=&quot;string&quot;&gt;&#39;user1&#39;&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&#39;addScore&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$dispatcher-&lt;/span&gt;&amp;gt;registerSubscriber(&lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(new User(&lt;span class=&quot;string&quot;&gt;&#39;user2&#39;&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&#39;addScore&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$dispatcher-&lt;/span&gt;&amp;gt;removeSubscriber(&lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$dispatcher-&lt;/span&gt;&amp;gt;sortList();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$dispatcher-&lt;/span&gt;&amp;gt;publish(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;variable&quot;&gt;$score&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;result:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt; is first handle &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;user1 add Score :&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;user3 add Score :&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;发布/ 订阅者模式（Publish/Subscribe）有两个参与者：发布者和订阅者。发布者创建某个信息，订阅者绑定这个信道，当发布者有消息发布至该信道时，订阅者就会接收到一个通知。最重要的一点是，发布者和订阅者是完全解耦的，彼此并不知晓对方的存在
    
    </summary>
    
      <category term="pattern" scheme="http://www.jcsama.com/categories/pattern/"/>
    
    
      <category term="pattern" scheme="http://www.jcsama.com/tags/pattern/"/>
    
      <category term="php" scheme="http://www.jcsama.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>stream_context_create</title>
    <link href="http://www.jcsama.com/2016/02/29/php-stream/"/>
    <id>http://www.jcsama.com/2016/02/29/php-stream/</id>
    <published>2016-02-29T13:06:35.000Z</published>
    <updated>2016-02-29T14:36:27.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;u6D41&quot;&gt;&lt;a href=&quot;#u6D41&quot; class=&quot;headerlink&quot; title=&quot;流&quot;&gt;&lt;/a&gt;流&lt;/h2&gt;&lt;p&gt;流是PHP4.3.0中引入的特性，作用是使用统一方式处理文件、网络和数据压缩等共同一套函数和用法的操作。&lt;/p&gt;
&lt;p&gt;每一个流都有一个协议和一个目标。指定协议和目标的方法是使用流标识符：&lt;/p&gt;
&lt;figure class=&quot;highlight elixir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;scheme&amp;gt;&lt;span class=&quot;symbol&quot;&gt;://&amp;lt;target&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;scheme&gt;是流的封装协议，&lt;target&gt;是流的数据源&lt;/target&gt;&lt;/scheme&gt;&lt;/p&gt;
&lt;p&gt;如：&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//api.jceee.com/services/api.php?action=test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;php:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//stdout&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;file:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;///etc/data.txt&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;stream_context_create&quot;&gt;&lt;a href=&quot;#stream_context_create&quot; class=&quot;headerlink&quot; title=&quot;stream_context_create&quot;&gt;&lt;/a&gt;&lt;code&gt;stream_context_create&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;stream_context_create用于创建流的上下文，也就是php流能接受的一系列可选参数，通过这些参数来定义流的行为，不同流的封装协议使用的上下文参数有所不同。&lt;/p&gt;
&lt;h3 id=&quot;file_get_content&quot;&gt;&lt;a href=&quot;#file_get_content&quot; class=&quot;headerlink&quot; title=&quot;file_get_content&quot;&gt;&lt;/a&gt;file_get_content&lt;/h3&gt;&lt;p&gt;我们定义一个流的参数对象，使&lt;code&gt;file_get_content&lt;/code&gt;发送&lt;code&gt;HTTP&lt;/code&gt;的&lt;code&gt;POST&lt;/code&gt;请求。&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$requestBody&lt;/span&gt; = json_encode(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;user&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;jceee&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$context&lt;/span&gt; = stream_context_create(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;http&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;method&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;POST&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;header&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;Content-Type: application/json;charset=utf-8;\r\n&quot;&lt;/span&gt; . &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;string&quot;&gt;&quot;Content-Length: &quot;&lt;/span&gt; . mb_strlen(&lt;span class=&quot;variable&quot;&gt;$requestBody&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;content&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;variable&quot;&gt;$requestBody&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$response&lt;/span&gt; = file_get_contents(&lt;span class=&quot;string&quot;&gt;&#39;http://api.jceee.com/api.php&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$context&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最外层的键&lt;code&gt;http&lt;/code&gt;定义了流封装协议，值是协议的具体内容。通过定义&lt;code&gt;http&lt;/code&gt;协议，我们就创建了一个&lt;code&gt;file_get_content&lt;/code&gt;可接收的流上下文对象。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;u6D41&quot;&gt;&lt;a href=&quot;#u6D41&quot; class=&quot;headerlink&quot; title=&quot;流&quot;&gt;&lt;/a&gt;流&lt;/h2&gt;&lt;p&gt;流是PHP4.3.0中引入的特性，作用是使用统一方式处理文件、网络和数据压缩等共同一套函数和用法的操作。&lt;/p&gt;
&lt;p&gt;每一个流都有
    
    </summary>
    
      <category term="php" scheme="http://www.jcsama.com/categories/php/"/>
    
    
      <category term="php" scheme="http://www.jcsama.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>php高精确度数值比较-bccomp</title>
    <link href="http://www.jcsama.com/2016/02/16/php-bccomp/"/>
    <id>http://www.jcsama.com/2016/02/16/php-bccomp/</id>
    <published>2016-02-16T15:26:30.000Z</published>
    <updated>2016-02-28T14:48:40.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;bccomp&quot;&gt;&lt;a href=&quot;#bccomp&quot; class=&quot;headerlink&quot; title=&quot;bccomp&quot;&gt;&lt;/a&gt;bccomp&lt;/h2&gt;&lt;p&gt;bccomp是php的bcmath库中的方法，使用前先用phpinfo()确认一下有没有开启bcmatch库,没有则需要进行对应的编译操作。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bccomp($left_operand, $right_operand [, $scale = 0]);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;参数&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;参数描述&lt;/th&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;$left_operand&lt;/td&gt;
&lt;td&gt;左边字符串&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$right_operand&lt;/td&gt;
&lt;td&gt;右边字符串&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$scale(可不填，默认0)&lt;/td&gt;
&lt;td&gt;返回值小数点后所需的位数&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;bccomp&lt;/code&gt;函数用于比较二个高精确度的数字。输入二个字符串，若二个字符串一样大则返回 0；若左边的数字字符串 (left operand) 比右边 (right operand) 的大则返回 +1；若左边的数字字符串比右边的小则返回 -1。scale 是一个可有可无的选项，表示返回值小数点后所需的位数:&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;pre&amp;gt;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(bccomp(&lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;));   &lt;span class=&quot;comment&quot;&gt;// int(-1)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(bccomp(&lt;span class=&quot;string&quot;&gt;&#39;1.00001&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)); &lt;span class=&quot;comment&quot;&gt;// int(0)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(bccomp(&lt;span class=&quot;string&quot;&gt;&#39;1.00001&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)); &lt;span class=&quot;comment&quot;&gt;// int(1)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u6574_u6570_u4E0E_u6D6E_u70B9_u6570_u5BF9_u6BD4&quot;&gt;&lt;a href=&quot;#u6574_u6570_u4E0E_u6D6E_u70B9_u6570_u5BF9_u6BD4&quot; class=&quot;headerlink&quot; title=&quot;整数与浮点数对比&quot;&gt;&lt;/a&gt;整数与浮点数对比&lt;/h2&gt;&lt;p&gt;举个例子：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;pre&amp;gt;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;number&quot;&gt;8160&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&#39;81.6&#39;&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;);          //&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;string&quot;&gt;&#39;81.6&#39;&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;);                  //&lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8160&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;string&quot;&gt;&#39;81.6&#39;&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;8160&lt;/span&gt;);           //&lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt;(-&lt;span class=&quot;number&quot;&gt;9.0949470177293&lt;/span&gt;E-&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一个值是整数8160，第二个值是浮点81.6 跟 100相乘，虽然都是8160，但并不相等，减下来有差。这时，我们可以用bccomp来做判断：&lt;/p&gt;
&lt;figure class=&quot;highlight elixir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var_dump(bccomp(&lt;span class=&quot;number&quot;&gt;8160&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;81.60&#39;&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;) === &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);  &lt;span class=&quot;regexp&quot;&gt;//bool&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果没有bcmath库，也可以把第一个整数除以100，得到浮点数再进行对比&lt;/p&gt;
&lt;figure class=&quot;highlight elixir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;number&quot;&gt;8160&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&#39;81.6&#39;&lt;/span&gt;);               &lt;span class=&quot;regexp&quot;&gt;//bool&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;bccomp&quot;&gt;&lt;a href=&quot;#bccomp&quot; class=&quot;headerlink&quot; title=&quot;bccomp&quot;&gt;&lt;/a&gt;bccomp&lt;/h2&gt;&lt;p&gt;bccomp是php的bcmath库中的方法，使用前先用phpinfo()确认一下有没有开启bcmatch库
    
    </summary>
    
      <category term="php" scheme="http://www.jcsama.com/categories/php/"/>
    
    
      <category term="php" scheme="http://www.jcsama.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>linux-man</title>
    <link href="http://www.jcsama.com/2016/02/13/linux-man/"/>
    <id>http://www.jcsama.com/2016/02/13/linux-man/</id>
    <published>2016-02-13T14:18:58.000Z</published>
    <updated>2016-02-28T14:48:40.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;man是manual的缩写，是系统中提供相关条目参考信息的命令。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果需要参考命令的用法，只需要在man后加上命令名就可以得到详细说明,如&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;man&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;会得到下面结果：&lt;/p&gt;
&lt;figure class=&quot;highlight livecodeserver&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LS(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)                     BSD General Commands Manual                    LS(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ls &lt;span class=&quot;comment&quot;&gt;-- list directory contents&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SYNOPSIS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ls [-ABCFGHLOPRSTUW@abcdefghiklmnopqrstuwx1] [&lt;span class=&quot;built_in&quot;&gt;file&lt;/span&gt; ...]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DESCRIPTION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     For &lt;span class=&quot;keyword&quot;&gt;each&lt;/span&gt; operand that names &lt;span class=&quot;operator&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;a&lt;/span&gt; type other than &lt;span class=&quot;built_in&quot;&gt;directory&lt;/span&gt;, ls displays its name &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; well &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;any&lt;/span&gt; requested, associated information.  For &lt;span class=&quot;keyword&quot;&gt;each&lt;/span&gt; operand that names &lt;span class=&quot;operator&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;of&lt;/span&gt; type &lt;span class=&quot;built_in&quot;&gt;directory&lt;/span&gt;, ls displays &lt;span class=&quot;operator&quot;&gt;the&lt;/span&gt; names &lt;span class=&quot;operator&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;files&lt;/span&gt; con-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     tained &lt;span class=&quot;operator&quot;&gt;within&lt;/span&gt; that &lt;span class=&quot;built_in&quot;&gt;directory&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; well &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;any&lt;/span&gt; requested, associated information.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     If no operands are given, &lt;span class=&quot;operator&quot;&gt;the&lt;/span&gt; contents &lt;span class=&quot;operator&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;the&lt;/span&gt; current &lt;span class=&quot;built_in&quot;&gt;directory&lt;/span&gt; are displayed.  If more than &lt;span class=&quot;constant&quot;&gt;one&lt;/span&gt; operand is given, non-&lt;span class=&quot;built_in&quot;&gt;directory&lt;/span&gt; operands are displayed &lt;span class=&quot;keyword&quot;&gt;first&lt;/span&gt;; &lt;span class=&quot;built_in&quot;&gt;directory&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;and&lt;/span&gt; non-&lt;span class=&quot;built_in&quot;&gt;directory&lt;/span&gt; operands are sorted separately &lt;span class=&quot;operator&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;in&lt;/span&gt; lexi-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     cographical order.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     The following options are available:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     -@      Display extended attribute &lt;span class=&quot;built_in&quot;&gt;keys&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;and&lt;/span&gt; sizes &lt;span class=&quot;operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; (-l) output.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;      (The &lt;span class=&quot;keyword&quot;&gt;numeric&lt;/span&gt; digit ``&lt;span class=&quot;constant&quot;&gt;one&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;.)  Force output &lt;span class=&quot;built_in&quot;&gt;to&lt;/span&gt; be &lt;span class=&quot;constant&quot;&gt;one&lt;/span&gt; entry per &lt;span class=&quot;built_in&quot;&gt;line&lt;/span&gt;.  This is &lt;span class=&quot;operator&quot;&gt;the&lt;/span&gt; default when output is &lt;span class=&quot;operator&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;a&lt;/span&gt; terminal.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     -A      List all entries except &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; . &lt;span class=&quot;operator&quot;&gt;and&lt;/span&gt; ...  Always &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;the&lt;/span&gt; super-user.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们可以看到结果中显示了LS(1),(1)代表的是&lt;code&gt;一般用户可使用的命令&lt;/code&gt;。在查询数据后面的数字是有意义的，它可以帮助我们了解或者直接查询相关的资料。每个数字具体含义如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;数字&lt;/th&gt;
&lt;th&gt;意义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;用户在shell环境中可以操作的命令或可执行文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;系统内核可调用的函数与工具等&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;一些常用的函数（function）与函数库（library），大部分为C的函数库（libc）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;设备文件的说明，通常是在/dev下的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;配置文件或者是某些文件的格式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;游戏（games）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;惯例与协议等，例如Linux文件系统、网络协议、ASCII code等说明&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;系统管理员可用的管理命令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;跟kernel有关的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如&lt;/p&gt;
&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ man &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;command&quot;&gt;write&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight autoit&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;WRITE(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)                    BSD System Calls Manual                   WRITE(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     pwrite, write, writev -- write output&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LIBRARY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Standard C Library (libc, -lc)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SYNOPSIS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ssize_t&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     pwrite(&lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; fildes, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; void *buf, size_t nbyte, off_t offset)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ssize_t&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     write(&lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; fildes, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; void *buf, size_t nbyte)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;lt;sys/uio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ssize_t&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     writev(&lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; fildes, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; struct iovec *iov, &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; iovcnt)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;man是manual的缩写，是系统中提供相关条目参考信息的命令。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果需要参考命令的用法，只需要在man后加上命令名就可以得到详细说明,如&lt;/p&gt;
&lt;figure class=&quot;highlight stat
    
    </summary>
    
      <category term="linux" scheme="http://www.jcsama.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.jcsama.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>php性状(trait)</title>
    <link href="http://www.jcsama.com/2016/02/12/php-trait/"/>
    <id>http://www.jcsama.com/2016/02/12/php-trait/</id>
    <published>2016-02-12T11:30:48.000Z</published>
    <updated>2016-02-28T14:48:40.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;Trait是php5.4.0引入的新概念，是类的部分实现，可以混入一个或多个现有的php类中。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;性状有两个作用：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;表明类可以做什么（接口）；&lt;/li&gt;
&lt;li&gt;提供模块化实现（类）；&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;u521B_u5EFA_u6027_u72B6&quot;&gt;&lt;a href=&quot;#u521B_u5EFA_u6027_u72B6&quot; class=&quot;headerlink&quot; title=&quot;创建性状&quot;&gt;&lt;/a&gt;创建性状&lt;/h2&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;trait&lt;/span&gt; TestTrait&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getSomething&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$this&lt;/span&gt;-&amp;gt;something;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u4F7F_u7528_u6027_u72B6&quot;&gt;&lt;a href=&quot;#u4F7F_u7528_u6027_u72B6&quot; class=&quot;headerlink&quot; title=&quot;使用性状&quot;&gt;&lt;/a&gt;使用性状&lt;/h2&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TestTrait&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$something&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&#39;something&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Test();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt;-&amp;gt;getSomething());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * result: something&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u62BD_u8C61_u65B9_u6CD5_2C_u9759_u6001_u65B9_u6CD5_u4E0E_u9759_u6001_u5C5E_u6027&quot;&gt;&lt;a href=&quot;#u62BD_u8C61_u65B9_u6CD5_2C_u9759_u6001_u65B9_u6CD5_u4E0E_u9759_u6001_u5C5E_u6027&quot; class=&quot;headerlink&quot; title=&quot;抽象方法,静态方法与静态属性&quot;&gt;&lt;/a&gt;抽象方法,静态方法与静态属性&lt;/h2&gt;&lt;p&gt;Trait跟类一样，也支持抽象方法的定义，还有静态方法，静态属性&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;trait&lt;/span&gt; TestTrait&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$num&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getSomething&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$this&lt;/span&gt;-&amp;gt;something;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;showHelloWorld&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getNew&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; date(&lt;span class=&quot;string&quot;&gt;&#39;Y-m-d H:i:s&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;addNum&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;::&lt;span class=&quot;variable&quot;&gt;$num&lt;/span&gt; ++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;::&lt;span class=&quot;variable&quot;&gt;$num&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TestTrait&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$something&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&#39;something&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;showHelloWorld&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var_dump(&lt;span class=&quot;string&quot;&gt;&#39;hello world&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Test();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt;-&amp;gt;showHelloWorld();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(Test::getNew());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt;-&amp;gt;addNum());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt;-&amp;gt;addNum());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt;-&amp;gt;addNum());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt;-&amp;gt;addNum());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/** &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *result:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * string(11) &quot;hello world&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * string(19) &quot;2016-02-12 21:11:27&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * int(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * int(2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * int(3)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * int(4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Trait_u65B9_u6CD5_u4F18_u5148_u7EA7&quot;&gt;&lt;a href=&quot;#Trait_u65B9_u6CD5_u4F18_u5148_u7EA7&quot; class=&quot;headerlink&quot; title=&quot;Trait方法优先级&quot;&gt;&lt;/a&gt;Trait方法优先级&lt;/h2&gt;&lt;p&gt;性状定义的方法的优先级是：&lt;/p&gt;
&lt;figure class=&quot;highlight lasso&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;当前类中的方法 &amp;gt; &lt;span class=&quot;keyword&quot;&gt;Trait&lt;/span&gt;的方法 &amp;gt; 基类中的方法&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u4F7F_u7528_u591A_u4E2ATrait&quot;&gt;&lt;a href=&quot;#u4F7F_u7528_u591A_u4E2ATrait&quot; class=&quot;headerlink&quot; title=&quot;使用多个Trait&quot;&gt;&lt;/a&gt;使用多个Trait&lt;/h2&gt;&lt;p&gt;使用多个trait时，需要用&lt;code&gt;,&lt;/code&gt;分隔开不同的性状&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TestTrait&lt;/span&gt;,&lt;span class=&quot;title&quot;&gt;OtherTrait&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$something&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&#39;something&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;insteadof&quot;&gt;&lt;a href=&quot;#insteadof&quot; class=&quot;headerlink&quot; title=&quot;insteadof&quot;&gt;&lt;/a&gt;insteadof&lt;/h2&gt;&lt;p&gt;两个Trait在同一个类中命名冲突，可以使用insteadof来指定方法名的使用来源&lt;/p&gt;
&lt;p&gt;Trait1::method insteadof Trait2&lt;/p&gt;
&lt;p&gt;insteadof是将trait2中的方法method代替成trait1中的method&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;trait&lt;/span&gt; OtherTrait&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getSomething&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$this&lt;/span&gt;-&amp;gt;something . &lt;span class=&quot;string&quot;&gt;&#39; from other&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;showOther&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;this is other&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TestTrait&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;OtherTrait&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;title&quot;&gt;OtherTrait&lt;/span&gt;::&lt;span class=&quot;title&quot;&gt;getSomething&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;insteadof&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TestTrait&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$something&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&#39;something&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Test();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt;-&amp;gt;getSomething());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * result: &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * something from other&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;as&quot;&gt;&lt;a href=&quot;#as&quot; class=&quot;headerlink&quot; title=&quot;as&quot;&gt;&lt;/a&gt;as&lt;/h2&gt;&lt;p&gt;trait::method as public|protected|private otherMethodName&lt;/p&gt;
&lt;p&gt;as 是给方法取一个别名,同时还可以声明方法的访问控制&lt;/p&gt;
&lt;figure class=&quot;highlight xquery&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class Test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    use TestTrait &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        TestTrait::getSomething as public getSomethingPart2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protected &lt;span class=&quot;variable&quot;&gt;$something&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&#39;something&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$test&lt;/span&gt; = new Test();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;variable&quot;&gt;$test-&lt;/span&gt;&amp;gt;getSomething());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var_dump(&lt;span class=&quot;variable&quot;&gt;$test-&lt;/span&gt;&amp;gt;getSomethingPart2());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * result: &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * something  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * something&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;u7EC4_u5408&quot;&gt;&lt;a href=&quot;#u7EC4_u5408&quot; class=&quot;headerlink&quot; title=&quot;组合&quot;&gt;&lt;/a&gt;组合&lt;/h2&gt;&lt;p&gt;trait同样可以引用其他trait,用法跟类一致.&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;trait&lt;/span&gt; ThreeTrait&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;OtherTrait&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Trait是php5.4.0引入的新概念，是类的部分实现，可以混入一个或多个现有的php类中。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;性状有两个作用：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;表明类可以做什么（接口）；&lt;/li&gt;
&lt;li&gt;提供模块化实现（类）
    
    </summary>
    
      <category term="php" scheme="http://www.jcsama.com/categories/php/"/>
    
    
      <category term="php" scheme="http://www.jcsama.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>linux-ps</title>
    <link href="http://www.jcsama.com/2016/02/06/linux-ps/"/>
    <id>http://www.jcsama.com/2016/02/06/linux-ps/</id>
    <published>2016-02-06T14:32:53.000Z</published>
    <updated>2016-02-28T14:48:40.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;ps(Process Status)，顾名思义，是在Linux中是查看进程状态的命令。ps查看正处于Running的进程，ps aux查看所有的进程。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ps_u8FDB_u7A0B_u72B6_u6001_u7801&quot;&gt;&lt;a href=&quot;#ps_u8FDB_u7A0B_u72B6_u6001_u7801&quot; class=&quot;headerlink&quot; title=&quot;ps进程状态码&quot;&gt;&lt;/a&gt;ps进程状态码&lt;/h2&gt;&lt;p&gt;ps几种主要的状态码是:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;D 不可中断 uninterruptible sleep (usually IO) &lt;/li&gt;
&lt;li&gt;R 运行 runnable (on run queue) &lt;/li&gt;
&lt;li&gt;S 睡眠 sleeping &lt;/li&gt;
&lt;li&gt;T 停止 traced or stopped &lt;/li&gt;
&lt;li&gt;Z 僵死 a defunct (”zombie”) process&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ps_u5217_u540D_u8BF4_u660E&quot;&gt;&lt;a href=&quot;#ps_u5217_u540D_u8BF4_u660E&quot; class=&quot;headerlink&quot; title=&quot;ps列名说明&quot;&gt;&lt;/a&gt;ps列名说明&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;列名&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;USER&lt;/td&gt;
&lt;td&gt;该 process 属于那个使用者账号的&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PID&lt;/td&gt;
&lt;td&gt;该 process 的号码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%CPU&lt;/td&gt;
&lt;td&gt;该 process 使用掉的 CPU 资源百分比&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%MEM&lt;/td&gt;
&lt;td&gt;该 process 所占用的物理内存百分比&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VSZ&lt;/td&gt;
&lt;td&gt;该 process 使用掉的虚拟内存量 (Kbytes)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RSS&lt;/td&gt;
&lt;td&gt;该 process 占用的固定的内存量 (Kbytes)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TTY&lt;/td&gt;
&lt;td&gt;该 process 是在那个终端机上面运作，若与终端机无关，则显示 ?，另外， tty1-tty6 是本机上面的登入者程序，若为 pts/0 等等的，则表示为由网络连接进主机的程序。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAT&lt;/td&gt;
&lt;td&gt;该程序目前的状态，主要的状态可以参照上面提到的&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;START&lt;/td&gt;
&lt;td&gt;该 process 被触发启动的时间&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIME&lt;/td&gt;
&lt;td&gt;该 process 实际使用 CPU 运作的时间&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;COMMAND&lt;/td&gt;
&lt;td&gt;该程序的实际指令&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;px_u53C2_u6570&quot;&gt;&lt;a href=&quot;#px_u53C2_u6570&quot; class=&quot;headerlink&quot; title=&quot;px参数&quot;&gt;&lt;/a&gt;px参数&lt;/h2&gt;&lt;p&gt;ps常用参数&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-e 显示所有进程&lt;/li&gt;
&lt;li&gt;-A 所有进程均显示，与-e具有同样效果&lt;/li&gt;
&lt;li&gt;-a 显示当前终端上所有进程，包括其他用户的进程&lt;/li&gt;
&lt;li&gt;-u 以用户来筛选进程&lt;/li&gt;
&lt;li&gt;x 显示没有控制终端的进程&lt;/li&gt;
&lt;li&gt;r 显示正在运行的进程&lt;/li&gt;
&lt;li&gt;-f 全格式&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;还有更多参数可以参考&lt;/p&gt;
&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;man ps&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;ps_u4F7F_u7528_u793A_u4F8B&quot;&gt;&lt;a href=&quot;#ps_u4F7F_u7528_u793A_u4F8B&quot; class=&quot;headerlink&quot; title=&quot;ps使用示例&quot;&gt;&lt;/a&gt;ps使用示例&lt;/h2&gt;&lt;h3 id=&quot;u67E5_u770B_u7279_u5B9A_u7528_u6237_u8FDB_u7A0B_3A&quot;&gt;&lt;a href=&quot;#u67E5_u770B_u7279_u5B9A_u7528_u6237_u8FDB_u7A0B_3A&quot; class=&quot;headerlink&quot; title=&quot;查看特定用户进程:&quot;&gt;&lt;/a&gt;查看特定用户进程:&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ps -u &amp;lt;用户名&amp;gt;&lt;/code&gt;，如查看root用户的进程&lt;/p&gt;
&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;ps -u root&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;result:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;UID   PID TTY           TIME CMD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ??        &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;43.94&lt;/span&gt; /sbin/launchd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u67E5_u770B_u6240_u6709_u8FDB_u7A0B&quot;&gt;&lt;a href=&quot;#u67E5_u770B_u6240_u6709_u8FDB_u7A0B&quot; class=&quot;headerlink&quot; title=&quot;查看所有进程&quot;&gt;&lt;/a&gt;查看所有进程&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ps &lt;span class=&quot;operator&quot;&gt;-e&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;result:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;PID TTY           TIME CMD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ??        &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;43.16&lt;/span&gt; /sbin/launchd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u67E5_u770B_u5168_u683C_u5F0F_u7684_u5168_u8FDB_u7A0B&quot;&gt;&lt;a href=&quot;#u67E5_u770B_u5168_u683C_u5F0F_u7684_u5168_u8FDB_u7A0B&quot; class=&quot;headerlink&quot; title=&quot;查看全格式的全进程&quot;&gt;&lt;/a&gt;查看全格式的全进程&lt;/h3&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;ps -ef&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;result:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;UID   PID  PPID   C STIME   TTY           TIME CMD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;116&lt;/span&gt;  ??        &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;42.63&lt;/span&gt; /sbin/launchd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u67E5_u770B_u5F53_u524D_u6240_u6709_u8FDB_u7A0Bcpu_u5360_u7528_u60C5_u51B5&quot;&gt;&lt;a href=&quot;#u67E5_u770B_u5F53_u524D_u6240_u6709_u8FDB_u7A0Bcpu_u5360_u7528_u60C5_u51B5&quot; class=&quot;headerlink&quot; title=&quot;查看当前所有进程cpu占用情况&quot;&gt;&lt;/a&gt;查看当前所有进程cpu占用情况&lt;/h3&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ &lt;/span&gt;ps aux&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;result:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;USER      PID   %CPU %MEM      VSZ    RSS   TT  STAT STARTED      TIME COMMAND&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;jceee    &lt;span class=&quot;number&quot;&gt;51422&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;0.1&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.6&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;3367032&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;107344&lt;/span&gt;   ??  S    四&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;下午   &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;36.91&lt;/span&gt; /Applications/Robomongo.app/Contents/MacOS/Robomongo&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u6839_u636E_u5173_u952E_u5B57_u67E5_u627E_u76F8_u5173_u8FDB_u7A0B&quot;&gt;&lt;a href=&quot;#u6839_u636E_u5173_u952E_u5B57_u67E5_u627E_u76F8_u5173_u8FDB_u7A0B&quot; class=&quot;headerlink&quot; title=&quot;根据关键字查找相关进程&quot;&gt;&lt;/a&gt;根据关键字查找相关进程&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ps aux | grep &amp;lt;进程名&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;ps&lt;/span&gt; aux | &lt;span class=&quot;keyword&quot;&gt;grep&lt;/span&gt; php-fpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;result:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;jceee      &lt;span class=&quot;number&quot;&gt;53756&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2493396&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;3460&lt;/span&gt;   ??  S     &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;53&lt;/span&gt;下午   &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00.02&lt;/span&gt; /usr/local/opt/php56/sbin/php-fpm --fpm-config /usr/local/etc/php/&lt;span class=&quot;number&quot;&gt;5.6&lt;/span&gt;/php-fpm.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ps(Process Status)，顾名思义，是在Linux中是查看进程状态的命令。ps查看正处于Running的进程，ps aux查看所有的进程。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ps_u8FDB_u7A0B_u72B6_u
    
    </summary>
    
      <category term="linux" scheme="http://www.jcsama.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.jcsama.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>linux-lsof</title>
    <link href="http://www.jcsama.com/2016/02/04/linux-lsof/"/>
    <id>http://www.jcsama.com/2016/02/04/linux-lsof/</id>
    <published>2016-02-04T14:18:46.000Z</published>
    <updated>2016-02-28T14:48:40.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;lsof（list open files）是一个列出当前系统打开文件的工具。在linux环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;lsof_u663E_u793A_u793A_u4F8B&quot;&gt;&lt;a href=&quot;#lsof_u663E_u793A_u793A_u4F8B&quot; class=&quot;headerlink&quot; title=&quot;lsof显示示例&quot;&gt;&lt;/a&gt;lsof显示示例&lt;/h2&gt;&lt;p&gt;example:以查看mongod进程为例子&lt;/p&gt;
&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ lsof &lt;span class=&quot;regexp&quot;&gt;/usr/&lt;/span&gt;local&lt;span class=&quot;regexp&quot;&gt;/bin/m&lt;/span&gt;ongod&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;结果：&lt;/p&gt;
&lt;figure class=&quot;highlight crmsh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;COMMAND   PID       &lt;span class=&quot;keyword&quot;&gt;USER&lt;/span&gt;   &lt;span class=&quot;title&quot;&gt;FD&lt;/span&gt;   &lt;span class=&quot;operator&quot;&gt;TYPE&lt;/span&gt; DEVICE SIZE/OFF     &lt;span class=&quot;keyword&quot;&gt;NODE&lt;/span&gt;&lt;span class=&quot;identifier&quot;&gt; &lt;/span&gt;&lt;span class=&quot;title&quot;&gt;NAME&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mongod  &lt;span class=&quot;number&quot;&gt;50995&lt;/span&gt; jceee  txt    REG    &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;27409336&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;17133981&lt;/span&gt; /usr/local/bin/../Cellar/mongodb/&lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;/bin/mongod&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;COMMAND&lt;/th&gt;
&lt;th&gt;PID&lt;/th&gt;
&lt;th&gt;USER&lt;/th&gt;
&lt;th&gt;FD&lt;/th&gt;
&lt;th&gt;TYPE&lt;/th&gt;
&lt;th&gt;DEVICE&lt;/th&gt;
&lt;th&gt;SIZE&lt;/th&gt;
&lt;th&gt;NODE&lt;/th&gt;
&lt;th&gt;NAME&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;进程名称&lt;/td&gt;
&lt;td&gt;进程标识符&lt;/td&gt;
&lt;td&gt;进程所有者&lt;/td&gt;
&lt;td&gt;文件描述符&lt;/td&gt;
&lt;td&gt;文件类型&lt;/td&gt;
&lt;td&gt;指定磁盘名&lt;/td&gt;
&lt;td&gt;文件大小&lt;/td&gt;
&lt;td&gt;索引节点&lt;/td&gt;
&lt;td&gt;打开文件的确切名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;mongod&lt;/td&gt;
&lt;td&gt;50995&lt;/td&gt;
&lt;td&gt;jceee&lt;/td&gt;
&lt;td&gt;txt&lt;/td&gt;
&lt;td&gt;REG&lt;/td&gt;
&lt;td&gt;1,4&lt;/td&gt;
&lt;td&gt;27409336&lt;/td&gt;
&lt;td&gt;17133981&lt;/td&gt;
&lt;td&gt;/usr/local/bin/../Cellar/mongodb/3.0.7/bin/mongod&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;lsof_u53C2_u6570&quot;&gt;&lt;a href=&quot;#lsof_u53C2_u6570&quot; class=&quot;headerlink&quot; title=&quot;lsof参数&quot;&gt;&lt;/a&gt;lsof参数&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;功能&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;lsof filename&lt;/td&gt;
&lt;td&gt;显示打开指定文件的所有进程&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof -a&lt;/td&gt;
&lt;td&gt;表示两个参数都必须满足时才显示结果&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof -c string&lt;/td&gt;
&lt;td&gt;显示COMMAND列中包含指定字符的进程所有打开的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof -u username&lt;/td&gt;
&lt;td&gt;显示所属user进程打开的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof -g gid&lt;/td&gt;
&lt;td&gt;显示归属gid的进程情况&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof +d /DIR/&lt;/td&gt;
&lt;td&gt;显示目录下被进程打开的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof +D /DIR/&lt;/td&gt;
&lt;td&gt;同上，但是会搜索目录下的所有目录，时间相对较长&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof -d FD&lt;/td&gt;
&lt;td&gt;显示指定文件描述符的进程&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof -n&lt;/td&gt;
&lt;td&gt;不将IP转换为hostname，缺省是不加上-n参数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof -i&lt;/td&gt;
&lt;td&gt;用以显示符合条件的进程情况&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsof -i[46] [protocol][@hostname / hostaddr][:service / port]&lt;/td&gt;
&lt;td&gt;参数功能在下面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;46 –&amp;gt; IPv4 or IPv6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;protocol –&amp;gt; TCP or UDP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;hostname –&amp;gt; Internet host name&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;hostaddr –&amp;gt; IPv4地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;service –&amp;gt; /etc/service中的 service name (可以不只一个)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;port –&amp;gt; 端口号 (可以不只一个)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;lsof（list open files）是一个列出当前系统打开文件的工具。在linux环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;lsof_u
    
    </summary>
    
      <category term="linux" scheme="http://www.jcsama.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.jcsama.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>brew安装mongodb</title>
    <link href="http://www.jcsama.com/2016/01/27/brew-mongodb/"/>
    <id>http://www.jcsama.com/2016/01/27/brew-mongodb/</id>
    <published>2016-01-27T14:51:27.000Z</published>
    <updated>2016-02-28T14:48:40.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;u7528brew_u5B89_u88C5mongodb&quot;&gt;&lt;a href=&quot;#u7528brew_u5B89_u88C5mongodb&quot; class=&quot;headerlink&quot; title=&quot;用brew安装mongodb&quot;&gt;&lt;/a&gt;用brew安装mongodb&lt;/h2&gt;&lt;h3 id=&quot;mongodb_install&quot;&gt;&lt;a href=&quot;#mongodb_install&quot; class=&quot;headerlink&quot; title=&quot;mongodb install&quot;&gt;&lt;/a&gt;mongodb install&lt;/h3&gt;&lt;p&gt;安装：&lt;/p&gt;
&lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;brew &lt;/span&gt;install mongodb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装好会出现以下内容:&lt;/p&gt;
&lt;figure class=&quot;highlight coffeescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;function&quot;&gt;=&amp;gt;&lt;/span&gt; Downloading &lt;span class=&quot;attribute&quot;&gt;https&lt;/span&gt;:&lt;span class=&quot;regexp&quot;&gt;//&lt;/span&gt;homebrew.bintray.com/bottles/mongodb-&lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;.el_capitan.bottle.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;######&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;100.0&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;function&quot;&gt;=&amp;gt;&lt;/span&gt; Pouring mongodb-&lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;.el_capitan.bottle.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;function&quot;&gt;=&amp;gt;&lt;/span&gt; Caveats&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;To have launchd start mongodb at &lt;span class=&quot;attribute&quot;&gt;login&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ln -sfv &lt;span class=&quot;regexp&quot;&gt;/usr/local/opt/mongodb/&lt;/span&gt;*.plist ~/Library/LaunchAgents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Then to load mongodb &lt;span class=&quot;attribute&quot;&gt;now&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Or, &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; you don&lt;span class=&quot;string&quot;&gt;&#39;t want/need launchctl, you can just run:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  mongod --config /usr/local/etc/mongod.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;==&amp;gt; Summary&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;🍺  /usr/local/Cellar/mongodb/3.0.7: 17 files, 158M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后提示了如何启动mongodb：&lt;/p&gt;
&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mongod --config &lt;span class=&quot;regexp&quot;&gt;/usr/&lt;/span&gt;local&lt;span class=&quot;regexp&quot;&gt;/etc/m&lt;/span&gt;ongod.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;–config后面的参数是启动时加载的配置文件，如果有什么想自己配置的可以复制一份备份，然后修改自定义的配置:&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;systemLog:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;label&quot;&gt;  destination:&lt;/span&gt; file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;label&quot;&gt;  path:&lt;/span&gt; &lt;span class=&quot;regexp&quot;&gt;/usr/&lt;/span&gt;local&lt;span class=&quot;regexp&quot;&gt;/var/&lt;/span&gt;log&lt;span class=&quot;regexp&quot;&gt;/mongodb/&lt;/span&gt;mongo.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;label&quot;&gt;  logAppend:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;storage:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;label&quot;&gt;  dbPath:&lt;/span&gt; &lt;span class=&quot;regexp&quot;&gt;/usr/&lt;/span&gt;local&lt;span class=&quot;regexp&quot;&gt;/var/&lt;/span&gt;mongodb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;label&quot;&gt;  bindIp:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;127.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u8FDE_u63A5mongodb&quot;&gt;&lt;a href=&quot;#u8FDE_u63A5mongodb&quot; class=&quot;headerlink&quot; title=&quot;连接mongodb&quot;&gt;&lt;/a&gt;连接mongodb&lt;/h3&gt;&lt;p&gt;mongod启动后，在命令行输入&lt;code&gt;mongo&lt;/code&gt;命令可以连接到数据库:&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mongo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MongoDB &lt;span class=&quot;keyword&quot;&gt;shell&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;version&lt;/span&gt;: 3.0.7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;connecting to: &lt;span class=&quot;keyword&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; &lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; blog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;switched to &lt;span class=&quot;keyword&quot;&gt;db&lt;/span&gt; blog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; &lt;span class=&quot;keyword&quot;&gt;exit&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;接下来就可以创表，增删查改等操作了&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;u7528brew_u5B89_u88C5mongodb&quot;&gt;&lt;a href=&quot;#u7528brew_u5B89_u88C5mongodb&quot; class=&quot;headerlink&quot; title=&quot;用brew安装mongodb&quot;&gt;&lt;/a&gt;用brew安装mongodb&lt;/
    
    </summary>
    
      <category term="mongodb" scheme="http://www.jcsama.com/categories/mongodb/"/>
    
    
      <category term="brew" scheme="http://www.jcsama.com/tags/brew/"/>
    
      <category term="mongodb" scheme="http://www.jcsama.com/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>php内置http服务器</title>
    <link href="http://www.jcsama.com/2016/01/26/php-webserver/"/>
    <id>http://www.jcsama.com/2016/01/26/php-webserver/</id>
    <published>2016-01-26T13:52:27.000Z</published>
    <updated>2016-02-28T14:48:40.000Z</updated>
    
    <content type="html">&lt;p&gt;php5.4开始内置了web服务器，虽然并不建议在生产环境中使用，但就本地调试来说这是个不错的工具。&lt;/p&gt;
&lt;p&gt;启动服务器很简单，打开终端，进入到项目根目录，执行以下命令:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;php -S localhost:&lt;span class=&quot;number&quot;&gt;8000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在浏览器中输入&lt;code&gt;localhost:8000/index.php&lt;/code&gt;就可以访问到当前目录下的index.php文件了。&lt;/p&gt;
&lt;p&gt;上面命令会启动一个php Web Server,端口是4000，端口可以根据自己需要换，但注意不要跟其他服务常用端口重复了。&lt;/p&gt;
&lt;p&gt;如果需要对指向的php服务器指向非默认的php配置文件，可以用&lt;code&gt;-c&lt;/code&gt;选项去指定对应的ini文件：&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;php -S &lt;span class=&quot;string&quot;&gt;localhost:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;8000&lt;/span&gt; -c app&lt;span class=&quot;regexp&quot;&gt;/config/&lt;/span&gt;php.ini&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;php5.4开始内置了web服务器，虽然并不建议在生产环境中使用，但就本地调试来说这是个不错的工具。&lt;/p&gt;
&lt;p&gt;启动服务器很简单，打开终端，进入到项目根目录，执行以下命令:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td
    
    </summary>
    
      <category term="php" scheme="http://www.jcsama.com/categories/php/"/>
    
    
      <category term="php" scheme="http://www.jcsama.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>hexo添加百度统计</title>
    <link href="http://www.jcsama.com/2016/01/25/hexo-baido-analytics/"/>
    <id>http://www.jcsama.com/2016/01/25/hexo-baido-analytics/</id>
    <published>2016-01-25T13:52:27.000Z</published>
    <updated>2016-02-28T14:48:40.000Z</updated>
    
    <content type="html">&lt;p&gt;想为hexo添加百度统计可以分为以下几步&lt;/p&gt;
&lt;h2 id=&quot;u6CE8_u518C_u767E_u5EA6_u7EDF_u8BA1&quot;&gt;&lt;a href=&quot;#u6CE8_u518C_u767E_u5EA6_u7EDF_u8BA1&quot; class=&quot;headerlink&quot; title=&quot;注册百度统计&quot;&gt;&lt;/a&gt;注册百度统计&lt;/h2&gt;&lt;h3 id=&quot;u6CE8_u518C&quot;&gt;&lt;a href=&quot;#u6CE8_u518C&quot; class=&quot;headerlink&quot; title=&quot;注册&quot;&gt;&lt;/a&gt;注册&lt;/h3&gt;&lt;p&gt;如果已经有了账号可以跳过注册这步，&lt;br&gt;注册账号的地址是&lt;br&gt;&lt;a href=&quot;http://tongji.baidu.com/web/welcome/login&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度统计&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;u83B7_u53D6_u767E_u5EA6_u7EDF_u8BA1_u4EE3_u7801&quot;&gt;&lt;a href=&quot;#u83B7_u53D6_u767E_u5EA6_u7EDF_u8BA1_u4EE3_u7801&quot; class=&quot;headerlink&quot; title=&quot;获取百度统计代码&quot;&gt;&lt;/a&gt;获取百度统计代码&lt;/h2&gt;&lt;p&gt;登陆站长后台，点击网站中心，左侧有个代码获取。基本代码都是一样的:&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;javascript&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; _hmt = _hmt || [];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; hm = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&quot;script&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  hm.src = &lt;span class=&quot;string&quot;&gt;&quot;//hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxx&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; s = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&quot;script&quot;&lt;/span&gt;)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  s.parentNode.insertBefore(hm, s);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;统计代码的作用都是一样的，在页面插入一段js请求百度的统计接口。重点在于每个人得到的&lt;code&gt;//hm.baidu.com/hm.js?&lt;/code&gt;后面的key值不同。&lt;/p&gt;
&lt;h2 id=&quot;u5728_u9875_u9762_u6DFB_u52A0_u767E_u5EA6_u7EDF_u8BA1_u4EE3_u7801&quot;&gt;&lt;a href=&quot;#u5728_u9875_u9762_u6DFB_u52A0_u767E_u5EA6_u7EDF_u8BA1_u4EE3_u7801&quot; class=&quot;headerlink&quot; title=&quot;在页面添加百度统计代码&quot;&gt;&lt;/a&gt;在页面添加百度统计代码&lt;/h2&gt;&lt;h3 id=&quot;u81EA_u5E26_u7EDF_u8BA1_u6A21_u677F&quot;&gt;&lt;a href=&quot;#u81EA_u5E26_u7EDF_u8BA1_u6A21_u677F&quot; class=&quot;headerlink&quot; title=&quot;自带统计模板&quot;&gt;&lt;/a&gt;自带统计模板&lt;/h3&gt;&lt;p&gt;大部分主题已经对百度统计功能进行了配置化抽取。以Next主题为例,在主题目录下的&lt;code&gt;layout&lt;/code&gt;/&lt;code&gt;_scripts&lt;/code&gt;/&lt;code&gt;analytics&lt;/code&gt;统计模板文件夹下已经有了&lt;code&gt;baidu-analytics.swig&lt;/code&gt;文件:&lt;/p&gt;
&lt;figure class=&quot;highlight django&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;/span&gt;&lt;span class=&quot;template_tag&quot;&gt;&amp;#123;% &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; theme.baidu_analytics %&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;javascript&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; _hmt = _hmt || [];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; hm = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&quot;script&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      hm.src = &lt;span class=&quot;string&quot;&gt;&quot;//hm.baidu.com/hm.js?&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;&amp;#123;&amp;#123; theme.baidu_analytics &amp;#125;&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;undefined&quot;&gt;&quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      var s = document.getElementsByTagName(&quot;script&quot;)[0];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      s.parentNode.insertBefore(hm, s);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;template_tag&quot;&gt;&amp;#123;% &lt;span class=&quot;keyword&quot;&gt;endif&lt;/span&gt; %&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;只要条件满足：&lt;code&gt;theme.baidu_analytics&lt;/code&gt;为true便插入这段代码。统计代码的key值已经被抽取到主题&lt;code&gt;_config.yml&lt;/code&gt;中的&lt;code&gt;baidu_analytics&lt;/code&gt;属性了。&lt;/p&gt;
&lt;p&gt;接下来，在主题的&lt;code&gt;_config.yml&lt;/code&gt;中添加上百度统计的key就行了&lt;/p&gt;
&lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# &lt;span class=&quot;keyword&quot;&gt;Baidu &lt;/span&gt;Analytics ID&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;baidu_analytics: &lt;/span&gt;your key&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;u624B_u52A8_u6DFB_u52A0_u7EDF_u8BA1_u6A21_u677F&quot;&gt;&lt;a href=&quot;#u624B_u52A8_u6DFB_u52A0_u7EDF_u8BA1_u6A21_u677F&quot; class=&quot;headerlink&quot; title=&quot;手动添加统计模板&quot;&gt;&lt;/a&gt;手动添加统计模板&lt;/h3&gt;&lt;p&gt;若主题中没有内置百度统计模板的，可以手动添加，像上面自带统计模板一样，建立一个统计模板文件夹&lt;code&gt;layout&lt;/code&gt;/&lt;code&gt;_scripts&lt;/code&gt;/&lt;code&gt;analytics&lt;/code&gt;，新建&lt;code&gt;baidu-analytics.swig&lt;/code&gt;文件并加入上面那段代码。接着，在想添加的模板上引入这文件就行了。&lt;/p&gt;
&lt;figure class=&quot;highlight ocaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;% &lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;analytics&lt;/span&gt;/baidu-analytics.swig&#39; %&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;想为hexo添加百度统计可以分为以下几步&lt;/p&gt;
&lt;h2 id=&quot;u6CE8_u518C_u767E_u5EA6_u7EDF_u8BA1&quot;&gt;&lt;a href=&quot;#u6CE8_u518C_u767E_u5EA6_u7EDF_u8BA1&quot; class=&quot;headerlink&quot; t
    
    </summary>
    
      <category term="node" scheme="http://www.jcsama.com/categories/node/"/>
    
    
      <category term="hexo" scheme="http://www.jcsama.com/tags/hexo/"/>
    
  </entry>
  
</feed>
